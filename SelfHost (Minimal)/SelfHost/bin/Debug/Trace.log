SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 04:23:08 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 04:23:08 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 04:23:08 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 04:23:08 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 04:23:54 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 04:26:08 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 04:26:08 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 04:26:08 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 04:26:08 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 04:28:02 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 04:33:39 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 04:34:58 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 04:34:58 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 04:34:58 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 04:34:58 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 04:35:19 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 04:35:20 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:35:20 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:35:21 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile read write idmgr",
  "State": "5503305480361307",
  "Nonce": "1341125522791883",
  "Raw": {
    "state": "5503305480361307",
    "nonce": "1341125522791883",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile read write idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 27/05/2015 04:35:21 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 04:35:21 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 27/05/2015 04:35:21 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 04:35:21 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=5503305480361307&nonce=1341125522791883&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20read%20write%20idmgr","ClientId":"implicitclient","AcrValues":[],"Created":635683413206296191}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:35:21 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:35:21 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=5503305480361307&nonce=1341125522791883&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20read%20write%20idmgr",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683413206296191
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:35:21 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:35:31 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:35:31 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:35:32 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:35:32 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=5503305480361307&nonce=1341125522791883&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:54977%2Fmodal.html&response_type=id_token token&scope=openid profile read write idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 04:35:32 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:35:32 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:35:32 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile read write idmgr",
  "State": "5503305480361307",
  "Nonce": "1341125522791883",
  "SessionId": "394a93e8463a70d8d9e6212d29eb01cb",
  "Raw": {
    "state": "5503305480361307",
    "nonce": "1341125522791883",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile read write idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:35:32 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Error: 0 : [Thinktecture.IdentityServer.Core.Validation.ScopeValidator]: 27/05/2015 04:35:32 p.m. +00:00 -- Invalid scope: read
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 04:35:32 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 27/05/2015 04:35:32 p.m. +00:00 -- Redirecting to: http://localhost:54977/modal.html#error=invalid_scope&state=5503305480361307
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 04:37:09 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 04:37:14 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:37:14 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:37:14 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "10457962240194946",
  "Nonce": "12952217718967358",
  "Raw": {
    "state": "10457962240194946",
    "nonce": "12952217718967358",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 27/05/2015 04:37:14 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 04:37:14 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 27/05/2015 04:37:14 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 04:37:14 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=10457962240194946&nonce=12952217718967358&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20idmgr","ClientId":"implicitclient","AcrValues":[],"Created":635683414349086371}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:14 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:14 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=10457962240194946&nonce=12952217718967358&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20idmgr",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683414349086371
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:14 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:20 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:20 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:20 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:20 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=10457962240194946&nonce=12952217718967358&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:54977%2Fmodal.html&response_type=id_token token&scope=openid profile idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 04:37:20 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:37:20 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:37:20 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "10457962240194946",
  "Nonce": "12952217718967358",
  "SessionId": "6a161f327ab03b69bff2779089d1d7e0",
  "Raw": {
    "state": "10457962240194946",
    "nonce": "12952217718967358",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:37:20 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:37:20 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "88421113",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "10457962240194946",
  "Nonce": "12952217718967358",
  "SessionId": "6a161f327ab03b69bff2779089d1d7e0",
  "Raw": {
    "state": "10457962240194946",
    "nonce": "12952217718967358",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 04:37:20 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 04:37:20 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 04:37:30 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:37:30 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:37:30 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "10457962240194946",
  "Nonce": "12952217718967358",
  "SessionId": "6a161f327ab03b69bff2779089d1d7e0",
  "Raw": {
    "state": "10457962240194946",
    "nonce": "12952217718967358",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:37:30 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 04:37:30 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "88421113",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "10457962240194946",
  "Nonce": "12952217718967358",
  "SessionId": "6a161f327ab03b69bff2779089d1d7e0",
  "Raw": {
    "state": "10457962240194946",
    "nonce": "12952217718967358",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 27/05/2015 04:37:30 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 04:37:30 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 04:37:30 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 04:37:31 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 27/05/2015 04:37:31 p.m. +00:00 -- Getting claims for identity token for subject: 88421113
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 04:37:31 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 27/05/2015 04:37:31 p.m. +00:00 -- Redirecting to: http://localhost:54977/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 04:37:31 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 04:37:31 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 04:37:31 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 04:37:31 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 04:37:31 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 04:37:32 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 04:37:32 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 04:37:32 p.m. +00:00 -- Scopes in access token: openid profile idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 04:37:32 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 04:37:32 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 04:37:32 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 27/05/2015 04:37:32 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 04:37:39 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 04:37:39 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 27/05/2015 04:37:39 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 04:37:39 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 04:37:39 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 27/05/2015 04:37:39 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "88421113",
  "PostLogOutUri": "http://localhost:54977/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 04:37:39 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 27/05/2015 04:37:39 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 04:37:39 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:54977/index.html","Created":635683414596917194}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:39 p.m. +00:00 -- Logout prompt for subject: 88421113
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:39 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:39 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:39 p.m. +00:00 -- Logout requested for subject: 88421113
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:39 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 04:37:39 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 04:37:40 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 27/05/2015 04:37:40 p.m. +00:00 -- unhandled exception in Autofac middleware
System.OperationCanceledException: Operación cancelada.
   en System.Threading.CancellationToken.ThrowOperationCanceledException()
   en System.Web.Http.HostAuthenticationFilter.<AuthenticateAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Owin.PassiveAuthenticationMessageHandler.<SendAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.HttpServer.<SendAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:02:56 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:02:56 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:02:56 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:02:56 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:09:34 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:09:34 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:09:34 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:09:34 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:09:55 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:09:58 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:09:58 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:09:58 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "4522118968127132",
  "Nonce": "9596029247540785",
  "Raw": {
    "state": "4522118968127132",
    "nonce": "9596029247540785",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 27/05/2015 11:09:58 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:09:58 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 27/05/2015 11:09:58 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 11:09:58 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=4522118968127132&nonce=9596029247540785&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20idmgr","ClientId":"implicitclient","AcrValues":[],"Created":635683649980851589}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:09:59 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:09:59 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=4522118968127132&nonce=9596029247540785&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20idmgr",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683649980851589
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:09:59 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:10:24 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:10:24 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:10:24 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:10:24 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=4522118968127132&nonce=9596029247540785&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:54977%2Fmodal.html&response_type=id_token token&scope=openid profile idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:10:24 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:10:24 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:10:24 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "4522118968127132",
  "Nonce": "9596029247540785",
  "SessionId": "e0d739c6925fe11d357d0f03bd98a2f4",
  "Raw": {
    "state": "4522118968127132",
    "nonce": "9596029247540785",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:10:24 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:10:24 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "4522118968127132",
  "Nonce": "9596029247540785",
  "SessionId": "e0d739c6925fe11d357d0f03bd98a2f4",
  "Raw": {
    "state": "4522118968127132",
    "nonce": "9596029247540785",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:10:24 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:10:24 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:10:36 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:10:36 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:10:36 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "4522118968127132",
  "Nonce": "9596029247540785",
  "SessionId": "e0d739c6925fe11d357d0f03bd98a2f4",
  "Raw": {
    "state": "4522118968127132",
    "nonce": "9596029247540785",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:10:36 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:10:36 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "4522118968127132",
  "Nonce": "9596029247540785",
  "SessionId": "e0d739c6925fe11d357d0f03bd98a2f4",
  "Raw": {
    "state": "4522118968127132",
    "nonce": "9596029247540785",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 27/05/2015 11:10:36 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:10:36 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:10:36 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:10:37 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 27/05/2015 11:10:37 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:10:37 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 27/05/2015 11:10:37 p.m. +00:00 -- Redirecting to: http://localhost:54977/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:10:37 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:10:37 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:10:37 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:10:37 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:10:37 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:10:38 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:10:38 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:10:38 p.m. +00:00 -- Scopes in access token: openid profile idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:10:38 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:10:38 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:10:38 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 27/05/2015 11:10:38 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:10:51 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:10:51 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 27/05/2015 11:10:51 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:10:51 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:10:51 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 27/05/2015 11:10:51 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:54977/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:10:51 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 27/05/2015 11:10:51 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 11:10:51 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:54977/index.html","Created":635683650512156980}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:10:51 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:10:51 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:10:51 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:10:51 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:10:51 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:10:51 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:10:51 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:10:51 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 27/05/2015 11:10:52 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:11:37 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:11:37 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:11:37 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:11:37 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:11:47 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:11:50 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:11:50 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:11:50 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "885288650505842",
  "Nonce": "1370792220506113",
  "Raw": {
    "state": "885288650505842",
    "nonce": "1370792220506113",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 27/05/2015 11:11:50 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:11:51 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 27/05/2015 11:11:51 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 11:11:51 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=885288650505842&nonce=1370792220506113&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20idmgr","ClientId":"implicitclient","AcrValues":[],"Created":635683651107329942}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:11:51 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:11:51 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=885288650505842&nonce=1370792220506113&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20idmgr",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683651107329942
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:11:51 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:11:58 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:11:58 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:11:58 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:11:58 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=885288650505842&nonce=1370792220506113&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:54977%2Fmodal.html&response_type=id_token token&scope=openid profile idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:11:58 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:11:58 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:11:58 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "885288650505842",
  "Nonce": "1370792220506113",
  "SessionId": "302063ab9cc86ed5cabf424ae8140e6b",
  "Raw": {
    "state": "885288650505842",
    "nonce": "1370792220506113",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:11:58 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:11:58 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "885288650505842",
  "Nonce": "1370792220506113",
  "SessionId": "302063ab9cc86ed5cabf424ae8140e6b",
  "Raw": {
    "state": "885288650505842",
    "nonce": "1370792220506113",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:11:58 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:11:58 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:12:01 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:12:01 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:12:01 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "885288650505842",
  "Nonce": "1370792220506113",
  "SessionId": "302063ab9cc86ed5cabf424ae8140e6b",
  "Raw": {
    "state": "885288650505842",
    "nonce": "1370792220506113",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:12:01 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:12:01 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "885288650505842",
  "Nonce": "1370792220506113",
  "SessionId": "302063ab9cc86ed5cabf424ae8140e6b",
  "Raw": {
    "state": "885288650505842",
    "nonce": "1370792220506113",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 27/05/2015 11:12:01 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:12:01 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:12:01 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:12:01 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 27/05/2015 11:12:01 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:12:01 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 27/05/2015 11:12:01 p.m. +00:00 -- Redirecting to: http://localhost:54977/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:12:02 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:12:02 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:12:02 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:12:02 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:12:02 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:12:02 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:12:02 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:12:02 p.m. +00:00 -- Scopes in access token: openid profile idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:12:02 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:12:02 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:12:02 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 27/05/2015 11:12:02 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 27/05/2015 11:12:17 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:12:17 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:12:17 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 27/05/2015 11:12:18 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:13:43 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:13:43 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 27/05/2015 11:13:43 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:13:43 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:13:43 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 27/05/2015 11:13:43 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:54977/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:13:43 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 27/05/2015 11:13:44 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 11:13:44 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:54977/index.html","Created":635683652239997976}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:44 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:44 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:44 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:44 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:44 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:44 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:13:44 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:13:44 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 27/05/2015 11:13:44 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:13:50 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:13:50 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:13:50 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:13:50 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "124976721132477",
  "Nonce": "44786624826816693",
  "Raw": {
    "state": "124976721132477",
    "nonce": "44786624826816693",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 27/05/2015 11:13:50 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:13:50 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 27/05/2015 11:13:50 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 11:13:50 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=124976721132477&nonce=44786624826816693&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20idmgr","ClientId":"implicitclient","AcrValues":[],"Created":635683652305889030}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:50 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:50 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=124976721132477&nonce=44786624826816693&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20idmgr",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683652305889030
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:50 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:56 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:56 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:56 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:13:56 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=124976721132477&nonce=44786624826816693&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:54977%2Fmodal.html&response_type=id_token token&scope=openid profile idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:13:56 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:13:56 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:13:56 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "124976721132477",
  "Nonce": "44786624826816693",
  "SessionId": "84f5addf15e3aea88fe1174be58987b2",
  "Raw": {
    "state": "124976721132477",
    "nonce": "44786624826816693",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:13:56 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:13:56 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "124976721132477",
  "Nonce": "44786624826816693",
  "SessionId": "84f5addf15e3aea88fe1174be58987b2",
  "Raw": {
    "state": "124976721132477",
    "nonce": "44786624826816693",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:13:56 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:13:56 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:14:00 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:14:00 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:14:00 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "124976721132477",
  "Nonce": "44786624826816693",
  "SessionId": "84f5addf15e3aea88fe1174be58987b2",
  "Raw": {
    "state": "124976721132477",
    "nonce": "44786624826816693",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:14:00 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:14:00 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "124976721132477",
  "Nonce": "44786624826816693",
  "SessionId": "84f5addf15e3aea88fe1174be58987b2",
  "Raw": {
    "state": "124976721132477",
    "nonce": "44786624826816693",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 27/05/2015 11:14:00 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:14:00 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:14:00 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:14:00 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 27/05/2015 11:14:00 p.m. +00:00 -- Getting claims for identity token for subject: 2
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:14:00 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 27/05/2015 11:14:00 p.m. +00:00 -- Redirecting to: http://localhost:54977/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:14:00 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:14:00 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:14:01 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:14:01 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:14:01 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:14:01 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:14:01 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:14:01 p.m. +00:00 -- Scopes in access token: openid profile idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:14:01 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:14:01 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:14:01 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 27/05/2015 11:14:01 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:16:25 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:16:25 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:16:25 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:16:25 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:16:36 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:16:40 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:16:40 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:16:40 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "9061816633268415",
  "Nonce": "64391551217624",
  "Raw": {
    "state": "9061816633268415",
    "nonce": "64391551217624",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 27/05/2015 11:16:40 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:16:40 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 27/05/2015 11:16:40 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 11:16:40 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=9061816633268415&nonce=64391551217624&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20idmgr","ClientId":"implicitclient","AcrValues":[],"Created":635683654000977051}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:16:40 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:16:40 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=9061816633268415&nonce=64391551217624&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20idmgr",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683654000977051
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:16:40 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:17:01 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:17:01 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:17:02 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:17:02 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=9061816633268415&nonce=64391551217624&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:54977%2Fmodal.html&response_type=id_token token&scope=openid profile idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:17:02 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:17:02 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:17:02 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "9061816633268415",
  "Nonce": "64391551217624",
  "SessionId": "4855890d1bb34a0ac643d5fa4423dc4c",
  "Raw": {
    "state": "9061816633268415",
    "nonce": "64391551217624",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:17:02 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:17:02 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "9061816633268415",
  "Nonce": "64391551217624",
  "SessionId": "4855890d1bb34a0ac643d5fa4423dc4c",
  "Raw": {
    "state": "9061816633268415",
    "nonce": "64391551217624",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:17:02 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:17:02 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:17:05 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:17:05 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:17:05 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "9061816633268415",
  "Nonce": "64391551217624",
  "SessionId": "4855890d1bb34a0ac643d5fa4423dc4c",
  "Raw": {
    "state": "9061816633268415",
    "nonce": "64391551217624",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:17:05 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:17:05 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "9061816633268415",
  "Nonce": "64391551217624",
  "SessionId": "4855890d1bb34a0ac643d5fa4423dc4c",
  "Raw": {
    "state": "9061816633268415",
    "nonce": "64391551217624",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 27/05/2015 11:17:05 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:17:05 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:17:05 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:17:05 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 27/05/2015 11:17:05 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:17:05 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 27/05/2015 11:17:05 p.m. +00:00 -- Redirecting to: http://localhost:54977/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:17:06 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:17:06 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:17:06 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:17:06 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:17:06 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:17:06 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:17:06 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:17:06 p.m. +00:00 -- Scopes in access token: openid profile idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:17:06 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:17:06 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:17:06 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 27/05/2015 11:17:06 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 27/05/2015 11:17:16 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:17:16 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:17:16 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 27/05/2015 11:17:16 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 27/05/2015 11:17:38 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:17:38 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:17:38 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 27/05/2015 11:17:38 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 27/05/2015 11:17:40 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:17:40 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:17:40 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 27/05/2015 11:17:40 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:17:41 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:17:41 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 27/05/2015 11:17:41 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:17:41 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:17:41 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 27/05/2015 11:17:41 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:54977/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:17:41 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 27/05/2015 11:17:41 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 11:17:41 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:54977/index.html","Created":635683654618614284}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:17:41 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:17:41 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:17:41 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:17:41 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:17:41 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:17:41 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:17:42 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:17:43 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 27/05/2015 11:17:43 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:18:08 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:18:08 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:18:08 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:18:08 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:18:29 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:18:32 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:18:32 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:18:33 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "1327826723336459",
  "Nonce": "12713549242190981",
  "Raw": {
    "state": "1327826723336459",
    "nonce": "12713549242190981",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 27/05/2015 11:18:33 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:18:33 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 27/05/2015 11:18:33 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 11:18:33 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=1327826723336459&nonce=12713549242190981&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20idmgr","ClientId":"implicitclient","AcrValues":[],"Created":635683655127786511}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:18:33 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:18:33 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=1327826723336459&nonce=12713549242190981&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20idmgr",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683655127786511
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:18:33 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:18:41 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:18:41 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:18:41 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:18:41 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=1327826723336459&nonce=12713549242190981&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:54977%2Fmodal.html&response_type=id_token token&scope=openid profile idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:18:41 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:18:41 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:18:41 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "1327826723336459",
  "Nonce": "12713549242190981",
  "SessionId": "10ff437848e1313115cac32077a17519",
  "Raw": {
    "state": "1327826723336459",
    "nonce": "12713549242190981",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:18:41 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:18:41 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "1327826723336459",
  "Nonce": "12713549242190981",
  "SessionId": "10ff437848e1313115cac32077a17519",
  "Raw": {
    "state": "1327826723336459",
    "nonce": "12713549242190981",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:18:41 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:18:41 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:18:55 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:18:55 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:18:55 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "1327826723336459",
  "Nonce": "12713549242190981",
  "SessionId": "10ff437848e1313115cac32077a17519",
  "Raw": {
    "state": "1327826723336459",
    "nonce": "12713549242190981",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:18:55 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:18:55 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile idmgr",
  "State": "1327826723336459",
  "Nonce": "12713549242190981",
  "SessionId": "10ff437848e1313115cac32077a17519",
  "Raw": {
    "state": "1327826723336459",
    "nonce": "12713549242190981",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile idmgr"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 27/05/2015 11:18:55 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:18:55 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:18:55 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:18:56 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 27/05/2015 11:18:56 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:18:56 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 27/05/2015 11:18:56 p.m. +00:00 -- Redirecting to: http://localhost:54977/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:18:56 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:18:56 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:18:56 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:18:56 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:18:57 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:18:57 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:18:57 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:18:57 p.m. +00:00 -- Scopes in access token: openid profile idmgr
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:18:57 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:18:57 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:18:57 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 27/05/2015 11:18:57 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 27/05/2015 11:19:05 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:19:05 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:19:05 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 27/05/2015 11:19:05 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:19:07 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:19:07 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 27/05/2015 11:19:07 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:19:07 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:19:07 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 27/05/2015 11:19:07 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:54977/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:19:07 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 27/05/2015 11:19:07 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 11:19:07 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:54977/index.html","Created":635683655478750192}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:19:07 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:19:07 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:19:07 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:19:07 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:19:07 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:19:07 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:19:08 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:19:08 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 27/05/2015 11:19:08 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:26:32 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:26:32 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:26:32 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 27/05/2015 11:26:32 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:27:00 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:27:03 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:27:03 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:27:03 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile webapi",
  "State": "17568363487937787",
  "Nonce": "14137552360147675",
  "Raw": {
    "state": "17568363487937787",
    "nonce": "14137552360147675",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 27/05/2015 11:27:03 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:27:03 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 27/05/2015 11:27:03 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 11:27:03 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=17568363487937787&nonce=14137552360147675&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683660236606397}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:04 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:04 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=17568363487937787&nonce=14137552360147675&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A54977%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683660236606397
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:04 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:10 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:10 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:11 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:11 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=17568363487937787&nonce=14137552360147675&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:54977%2Fmodal.html&response_type=id_token token&scope=openid profile webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:27:11 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:27:11 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:27:11 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile webapi",
  "State": "17568363487937787",
  "Nonce": "14137552360147675",
  "SessionId": "bb998eb14da11a86692918eac9d33bc7",
  "Raw": {
    "state": "17568363487937787",
    "nonce": "14137552360147675",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:27:11 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:27:11 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile webapi",
  "State": "17568363487937787",
  "Nonce": "14137552360147675",
  "SessionId": "bb998eb14da11a86692918eac9d33bc7",
  "Raw": {
    "state": "17568363487937787",
    "nonce": "14137552360147675",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:27:11 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:27:11 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 27/05/2015 11:27:14 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:27:14 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:27:14 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:54977/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile webapi",
  "State": "17568363487937787",
  "Nonce": "14137552360147675",
  "SessionId": "bb998eb14da11a86692918eac9d33bc7",
  "Raw": {
    "state": "17568363487937787",
    "nonce": "14137552360147675",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:27:14 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 27/05/2015 11:27:14 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:54977/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile webapi",
  "State": "17568363487937787",
  "Nonce": "14137552360147675",
  "SessionId": "bb998eb14da11a86692918eac9d33bc7",
  "Raw": {
    "state": "17568363487937787",
    "nonce": "14137552360147675",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:54977/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 27/05/2015 11:27:14 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:27:14 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:27:14 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:27:14 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 27/05/2015 11:27:14 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 27/05/2015 11:27:14 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 27/05/2015 11:27:14 p.m. +00:00 -- Redirecting to: http://localhost:54977/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:27:15 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:27:15 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:27:15 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:27:15 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:27:15 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:27:15 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:27:15 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:27:15 p.m. +00:00 -- Scopes in access token: openid profile webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:27:15 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 27/05/2015 11:27:15 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 27/05/2015 11:27:15 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 27/05/2015 11:27:15 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 27/05/2015 11:27:25 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:27:25 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:27:25 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 27/05/2015 11:27:25 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 27/05/2015 11:27:32 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:27:32 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 27/05/2015 11:27:32 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:27:32 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 27/05/2015 11:27:32 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 27/05/2015 11:27:32 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:54977/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:27:32 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 27/05/2015 11:27:32 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 27/05/2015 11:27:32 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:54977/index.html","Created":635683660529446210}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:32 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:32 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:32 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:32 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:33 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 27/05/2015 11:27:33 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:27:33 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 27/05/2015 11:27:33 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 27/05/2015 11:27:33 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:13:37 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:13:38 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:13:38 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:13:38 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "2765021900762523",
  "Nonce": "5983074915942353",
  "Raw": {
    "state": "2765021900762523",
    "nonce": "5983074915942353",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 02:13:38 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:13:38 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 02:13:38 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 02:13:38 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=2765021900762523&nonce=5983074915942353&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683760181387577}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:13:38 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:13:38 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=2765021900762523&nonce=5983074915942353&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683760181387577
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:13:38 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:13:45 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:13:45 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:13:45 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:13:45 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=2765021900762523&nonce=5983074915942353&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:13:45 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:13:45 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:13:45 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "2765021900762523",
  "Nonce": "5983074915942353",
  "SessionId": "4661d1b857fd327bc6fb411fe028a124",
  "Raw": {
    "state": "2765021900762523",
    "nonce": "5983074915942353",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:13:45 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Error: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:13:45 a.m. +00:00 -- Invalid redirect_uri: http://localhost:59380/modal.html
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:54977/callback.html",
    "http://localhost:54977/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "2765021900762523",
  "Nonce": "5983074915942353",
  "SessionId": "4661d1b857fd327bc6fb411fe028a124",
  "Raw": {
    "state": "2765021900762523",
    "nonce": "5983074915942353",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:13:45 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 28/05/2015 02:14:39 a.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 28/05/2015 02:14:39 a.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 28/05/2015 02:14:39 a.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 28/05/2015 02:14:39 a.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:15:13 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:15:15 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:15:15 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:15:15 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "12181899024926887",
  "Nonce": "1395454152465471",
  "Raw": {
    "state": "12181899024926887",
    "nonce": "1395454152465471",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 02:15:15 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:15:15 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 02:15:15 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 02:15:15 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=12181899024926887&nonce=1395454152465471&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683761154729207}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:15:16 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:15:16 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=12181899024926887&nonce=1395454152465471&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683761154729207
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:15:16 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:15:24 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:15:24 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:15:25 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:15:25 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=12181899024926887&nonce=1395454152465471&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:15:25 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:15:25 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:15:25 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "12181899024926887",
  "Nonce": "1395454152465471",
  "SessionId": "d8ad16d935c792ca79b8d96fc30dc52a",
  "Raw": {
    "state": "12181899024926887",
    "nonce": "1395454152465471",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:15:25 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Error: 0 : [Thinktecture.IdentityServer.Core.Validation.ScopeValidator]: 28/05/2015 02:15:25 a.m. +00:00 -- Requested scope not allowed: email
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:15:25 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 28/05/2015 02:17:01 a.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 28/05/2015 02:17:01 a.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 28/05/2015 02:17:01 a.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 28/05/2015 02:17:01 a.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:17:41 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:17:42 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:17:42 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:17:42 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7839689952406936",
  "Nonce": "7840545389102168",
  "Raw": {
    "state": "7839689952406936",
    "nonce": "7840545389102168",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 02:17:42 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:17:42 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 02:17:42 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 02:17:42 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=7839689952406936&nonce=7840545389102168&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683762624620597}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:17:43 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:17:43 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=7839689952406936&nonce=7840545389102168&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683762624620597
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:17:43 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:17:50 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:17:50 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:17:51 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:17:51 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=7839689952406936&nonce=7840545389102168&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:17:51 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:17:51 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:17:51 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7839689952406936",
  "Nonce": "7840545389102168",
  "SessionId": "1e82607ec8ee4d74a9c452c8ae472899",
  "Raw": {
    "state": "7839689952406936",
    "nonce": "7840545389102168",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:17:51 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Error: 0 : [Thinktecture.IdentityServer.Core.Validation.ScopeValidator]: 28/05/2015 02:17:51 a.m. +00:00 -- Requested scope not allowed: email
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:17:51 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:01 a.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:01 a.m. +00:00 -- EnableSignOutPrompt set to true, rendering logout prompt
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:03 a.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:03 a.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:03 a.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:03 a.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 02:18:03 a.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 02:18:03 a.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 28/05/2015 02:18:03 a.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:18:09 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:18:09 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:18:09 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:18:09 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "10142486151075953",
  "Nonce": "11523385155696511",
  "Raw": {
    "state": "10142486151075953",
    "nonce": "11523385155696511",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 02:18:09 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:18:09 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 02:18:09 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 02:18:09 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=10142486151075953&nonce=11523385155696511&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683762893261811}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:09 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:09 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=10142486151075953&nonce=11523385155696511&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683762893261811
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:09 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:16 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:16 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:16 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:18:16 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=10142486151075953&nonce=11523385155696511&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:18:16 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:18:16 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:18:16 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "10142486151075953",
  "Nonce": "11523385155696511",
  "SessionId": "38eed0b0af152ec2190d1aa25f75048c",
  "Raw": {
    "state": "10142486151075953",
    "nonce": "11523385155696511",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:18:16 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Error: 0 : [Thinktecture.IdentityServer.Core.Validation.ScopeValidator]: 28/05/2015 02:18:16 a.m. +00:00 -- Requested scope not allowed: email
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:18:16 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 28/05/2015 02:20:18 a.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 28/05/2015 02:20:18 a.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 28/05/2015 02:20:18 a.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 28/05/2015 02:20:18 a.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:21:00 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:21:01 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:21:01 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:21:01 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "5811946957666184",
  "Nonce": "11232753251117795",
  "Raw": {
    "state": "5811946957666184",
    "nonce": "11232753251117795",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 02:21:01 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:21:01 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 02:21:01 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 02:21:01 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=5811946957666184&nonce=11232753251117795&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683764615323966}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:21:02 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:21:02 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=5811946957666184&nonce=11232753251117795&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683764615323966
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:21:02 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:21:09 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:21:09 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:21:10 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:21:10 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=5811946957666184&nonce=11232753251117795&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:21:10 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:21:10 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:21:10 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "5811946957666184",
  "Nonce": "11232753251117795",
  "SessionId": "3e8d739ee2fda355f6fc2ac16bb72c65",
  "Raw": {
    "state": "5811946957666184",
    "nonce": "11232753251117795",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:21:10 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:21:10 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "5811946957666184",
  "Nonce": "11232753251117795",
  "SessionId": "3e8d739ee2fda355f6fc2ac16bb72c65",
  "Raw": {
    "state": "5811946957666184",
    "nonce": "11232753251117795",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:21:10 a.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:21:10 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:21:13 a.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:21:13 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:21:13 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "5811946957666184",
  "Nonce": "11232753251117795",
  "SessionId": "3e8d739ee2fda355f6fc2ac16bb72c65",
  "Raw": {
    "state": "5811946957666184",
    "nonce": "11232753251117795",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:21:13 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:21:13 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "5811946957666184",
  "Nonce": "11232753251117795",
  "SessionId": "3e8d739ee2fda355f6fc2ac16bb72c65",
  "Raw": {
    "state": "5811946957666184",
    "nonce": "11232753251117795",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 28/05/2015 02:21:13 a.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:21:14 a.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:21:14 a.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:21:14 a.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 28/05/2015 02:21:14 a.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:21:14 a.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 28/05/2015 02:21:14 a.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:21:14 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:21:14 a.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:21:15 a.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:21:15 a.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:21:15 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:21:15 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:21:15 a.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:21:15 a.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:21:15 a.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:21:15 a.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:21:15 a.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 28/05/2015 02:21:15 a.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:21:31 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:21:31 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:21:31 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:21:31 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:21:33 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:21:33 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:21:33 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:21:33 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:27:37 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:27:37 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:27:37 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:27:37 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "11610627154165808",
  "Nonce": "9878671669654901",
  "Raw": {
    "state": "11610627154165808",
    "nonce": "9878671669654901",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 02:27:37 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:27:37 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 02:27:37 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 02:27:37 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=11610627154165808&nonce=9878671669654901&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683768573950747}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:27:37 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:27:37 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=11610627154165808&nonce=9878671669654901&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683768573950747
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:27:37 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:27:42 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:27:42 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:27:42 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:27:42 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=11610627154165808&nonce=9878671669654901&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:27:43 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:27:43 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:27:43 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "11610627154165808",
  "Nonce": "9878671669654901",
  "SessionId": "ced97bbb558bcfd386e2ddc1af8fb30a",
  "Raw": {
    "state": "11610627154165808",
    "nonce": "9878671669654901",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:27:43 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:27:43 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "11610627154165808",
  "Nonce": "9878671669654901",
  "SessionId": "ced97bbb558bcfd386e2ddc1af8fb30a",
  "Raw": {
    "state": "11610627154165808",
    "nonce": "9878671669654901",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 28/05/2015 02:27:43 a.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:27:43 a.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:27:43 a.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:27:43 a.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 28/05/2015 02:27:43 a.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:27:43 a.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:27:43 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 28/05/2015 02:27:43 a.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:27:43 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:27:43 a.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:27:43 a.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:27:43 a.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:27:43 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:27:43 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:27:43 a.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:27:43 a.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:27:43 a.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:27:43 a.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:27:43 a.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 28/05/2015 02:27:43 a.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:27:48 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:27:48 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:27:48 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:27:48 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:28:35 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:28:35 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:28:35 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:28:35 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:29:24 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:29:24 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:29:24 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:29:24 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "29456195306712683",
  "Nonce": "6638205274937269",
  "Raw": {
    "state": "29456195306712683",
    "nonce": "6638205274937269",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 02:29:24 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:29:24 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 02:29:24 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 02:29:24 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=29456195306712683&nonce=6638205274937269&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683769641508077}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:29:24 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:29:24 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=29456195306712683&nonce=6638205274937269&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683769641508077
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:29:24 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:29:31 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:29:31 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:29:31 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:29:31 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=29456195306712683&nonce=6638205274937269&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:29:31 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:29:31 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:29:31 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "29456195306712683",
  "Nonce": "6638205274937269",
  "SessionId": "590bbce15d70ebdc78f6cbb9c6358210",
  "Raw": {
    "state": "29456195306712683",
    "nonce": "6638205274937269",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:29:31 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:29:31 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "29456195306712683",
  "Nonce": "6638205274937269",
  "SessionId": "590bbce15d70ebdc78f6cbb9c6358210",
  "Raw": {
    "state": "29456195306712683",
    "nonce": "6638205274937269",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 28/05/2015 02:29:31 a.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:29:31 a.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:29:31 a.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:29:31 a.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 28/05/2015 02:29:31 a.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:29:31 a.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:29:31 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 28/05/2015 02:29:31 a.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:29:31 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:29:31 a.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:29:32 a.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:29:32 a.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:29:32 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:29:32 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:29:32 a.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:29:32 a.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:29:32 a.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:29:32 a.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:29:32 a.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 28/05/2015 02:29:32 a.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:29:36 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:29:36 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:29:36 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:29:36 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:29:47 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:29:47 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:29:47 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:29:47 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:29:48 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:29:48 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:29:48 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:29:48 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:29:49 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:29:49 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:29:49 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:29:49 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:29:59 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:29:59 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:29:59 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:29:59 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:30:01 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:30:01 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:30:01 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:30:01 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:30:01 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:30:01 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:30:01 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:30:01 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:30:04 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:30:04 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:30:04 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:30:04 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:30:05 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:30:05 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:30:05 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:30:05 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:30:05 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:30:05 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:30:05 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:30:05 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:32:03 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:32:03 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:32:03 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:32:03 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "30228612267233636",
  "Nonce": "10323672217488209",
  "Raw": {
    "state": "30228612267233636",
    "nonce": "10323672217488209",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 02:32:03 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:32:03 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 02:32:03 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 02:32:03 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=30228612267233636&nonce=10323672217488209&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683771234872563}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:32:03 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:32:03 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=30228612267233636&nonce=10323672217488209&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683771234872563
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:32:03 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:32:10 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:32:10 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:32:10 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:32:10 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=30228612267233636&nonce=10323672217488209&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:32:10 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:32:10 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:32:10 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "30228612267233636",
  "Nonce": "10323672217488209",
  "SessionId": "e4d08c0e01afd2c06e7bdd3be1cc6114",
  "Raw": {
    "state": "30228612267233636",
    "nonce": "10323672217488209",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:32:10 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:32:10 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "30228612267233636",
  "Nonce": "10323672217488209",
  "SessionId": "e4d08c0e01afd2c06e7bdd3be1cc6114",
  "Raw": {
    "state": "30228612267233636",
    "nonce": "10323672217488209",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 28/05/2015 02:32:10 a.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:32:10 a.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:32:10 a.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:32:10 a.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 28/05/2015 02:32:10 a.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:32:10 a.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:32:10 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 28/05/2015 02:32:10 a.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:32:10 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:32:10 a.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:32:10 a.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:32:10 a.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:32:10 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:32:10 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:32:10 a.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:32:10 a.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:32:10 a.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:32:10 a.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:32:10 a.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 28/05/2015 02:32:10 a.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:32:13 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:32:13 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:32:13 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:32:13 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:35:16 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:35:16 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:35:16 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:35:16 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "8806532692342757",
  "Nonce": "12594590455686174",
  "Raw": {
    "state": "8806532692342757",
    "nonce": "12594590455686174",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 02:35:16 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:35:16 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 02:35:16 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 02:35:16 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=8806532692342757&nonce=12594590455686174&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683773164846734}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:35:16 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:35:16 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=8806532692342757&nonce=12594590455686174&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683773164846734
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:35:16 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:35:23 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:35:23 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:35:23 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:35:23 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=8806532692342757&nonce=12594590455686174&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:35:23 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:35:23 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:35:23 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "8806532692342757",
  "Nonce": "12594590455686174",
  "SessionId": "6cb31c97faf957754b8aa39a3d0629bc",
  "Raw": {
    "state": "8806532692342757",
    "nonce": "12594590455686174",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:35:23 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:35:23 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "8806532692342757",
  "Nonce": "12594590455686174",
  "SessionId": "6cb31c97faf957754b8aa39a3d0629bc",
  "Raw": {
    "state": "8806532692342757",
    "nonce": "12594590455686174",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 28/05/2015 02:35:23 a.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:35:23 a.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:35:23 a.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:35:24 a.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 28/05/2015 02:35:24 a.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:35:24 a.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:35:24 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 28/05/2015 02:35:24 a.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:35:24 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:35:24 a.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:35:24 a.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:35:24 a.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:24 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:24 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:35:24 a.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:35:24 a.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:35:24 a.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:35:24 a.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:35:24 a.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 28/05/2015 02:35:24 a.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:35:26 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:26 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:26 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:35:26 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:35:29 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:29 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:29 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:35:29 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:35:31 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:31 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:31 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:35:31 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:35:31 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:31 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:31 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:35:31 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:35:38 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:38 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:38 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:35:38 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:35:58 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:58 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:35:58 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:35:58 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:37:12 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:37:12 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:37:12 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:37:12 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:37:34 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:37:34 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:37:34 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:37:34 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:37:36 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:37:36 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:37:36 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:37:36 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:38:39 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:38:39 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:38:39 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:38:39 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7362472494594868",
  "Nonce": "897078717461404",
  "Raw": {
    "state": "7362472494594868",
    "nonce": "897078717461404",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 02:38:39 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:38:39 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 02:38:39 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 02:38:39 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=7362472494594868&nonce=897078717461404&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683775196697535}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:38:39 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:38:39 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=7362472494594868&nonce=897078717461404&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683775196697535
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:38:39 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:38:47 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:38:47 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:38:47 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:38:47 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=7362472494594868&nonce=897078717461404&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:38:47 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:38:47 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:38:47 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7362472494594868",
  "Nonce": "897078717461404",
  "SessionId": "ae1ee871c671318f69f47714fb9e4e2d",
  "Raw": {
    "state": "7362472494594868",
    "nonce": "897078717461404",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:38:47 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:38:47 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7362472494594868",
  "Nonce": "897078717461404",
  "SessionId": "ae1ee871c671318f69f47714fb9e4e2d",
  "Raw": {
    "state": "7362472494594868",
    "nonce": "897078717461404",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 28/05/2015 02:38:47 a.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:38:47 a.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:38:47 a.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:38:47 a.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 28/05/2015 02:38:47 a.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 02:38:47 a.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:38:47 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 28/05/2015 02:38:47 a.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:38:47 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:38:47 a.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:38:47 a.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:38:47 a.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:38:47 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:38:47 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:38:47 a.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:38:47 a.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:38:47 a.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 02:38:47 a.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 02:38:47 a.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 28/05/2015 02:38:47 a.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:38:59 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:38:59 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:38:59 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:38:59 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:39:16 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:39:17 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:39:17 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:39:17 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:39:18 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:39:18 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:39:18 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:39:18 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:39:22 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:39:22 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:39:22 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:39:22 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:39:46 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:39:46 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:39:46 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:39:46 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:39:47 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:39:47 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:39:47 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:39:47 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:39:47 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:39:47 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:39:47 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:39:47 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:40:18 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:40:18 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:40:18 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:40:18 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:40:20 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:40:20 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:40:20 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:40:20 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:40:20 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:40:20 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:40:20 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:40:20 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:40:44 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:40:44 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:40:44 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:40:44 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:40:46 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:40:46 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:40:46 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:40:46 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:40:46 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:40:46 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:40:46 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:40:46 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:41:03 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:41:03 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 02:41:03 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 02:41:03 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:43:47 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:43:47 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:43:47 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:43:47 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:43:47 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:43:47 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/frame.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "8173008163744005",
  "Nonce": "15516994436912788",
  "PromptMode": "none",
  "SessionId": "ae1ee871c671318f69f47714fb9e4e2d",
  "Raw": {
    "state": "8173008163744005",
    "nonce": "15516994436912788",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/frame.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi",
    "prompt": "none"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:43:47 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Error: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:43:47 a.m. +00:00 -- Invalid redirect_uri: http://localhost:59380/frame.html
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/frame.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "8173008163744005",
  "Nonce": "15516994436912788",
  "PromptMode": "none",
  "SessionId": "ae1ee871c671318f69f47714fb9e4e2d",
  "Raw": {
    "state": "8173008163744005",
    "nonce": "15516994436912788",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/frame.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi",
    "prompt": "none"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:43:47 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:43:48 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:43:48 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/frame.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "9426280115836393",
  "Nonce": "12159183768849167",
  "PromptMode": "none",
  "SessionId": "ae1ee871c671318f69f47714fb9e4e2d",
  "Raw": {
    "state": "9426280115836393",
    "nonce": "12159183768849167",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/frame.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi",
    "prompt": "none"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:43:48 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:43:48 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Error: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:43:48 a.m. +00:00 -- Invalid redirect_uri: http://localhost:59380/frame.html
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/frame.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "9426280115836393",
  "Nonce": "12159183768849167",
  "PromptMode": "none",
  "SessionId": "ae1ee871c671318f69f47714fb9e4e2d",
  "Raw": {
    "state": "9426280115836393",
    "nonce": "12159183768849167",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/frame.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi",
    "prompt": "none"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:43:48 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:43:48 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:43:48 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:43:48 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/frame.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "5528356272963833",
  "Nonce": "10040005792309175",
  "PromptMode": "none",
  "SessionId": "ae1ee871c671318f69f47714fb9e4e2d",
  "Raw": {
    "state": "5528356272963833",
    "nonce": "10040005792309175",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/frame.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi",
    "prompt": "none"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:43:48 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Error: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 02:43:48 a.m. +00:00 -- Invalid redirect_uri: http://localhost:59380/frame.html
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/frame.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "5528356272963833",
  "Nonce": "10040005792309175",
  "PromptMode": "none",
  "SessionId": "ae1ee871c671318f69f47714fb9e4e2d",
  "Raw": {
    "state": "5528356272963833",
    "nonce": "10040005792309175",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/frame.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi",
    "prompt": "none"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 02:43:48 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 02:55:35 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 02:55:35 a.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 28/05/2015 02:55:35 a.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 28/05/2015 02:55:35 a.m. +00:00 -- End session request validation success
{
  "SubjectId": "1"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 02:55:35 a.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 28/05/2015 02:55:35 a.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 02:55:35 a.m. +00:00 -- Protecting message: {"Created":635683785354189366}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:55:35 a.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:55:35 a.m. +00:00 -- EnableSignOutPrompt set to true, rendering logout prompt
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:55:38 a.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:55:38 a.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:55:38 a.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 02:55:38 a.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 02:55:38 a.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 02:55:38 a.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 28/05/2015 02:55:38 a.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:00:38 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:00:39 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:00:39 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:00:39 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "4352673321215197",
  "Nonce": "6500220951765553",
  "Raw": {
    "state": "4352673321215197",
    "nonce": "6500220951765553",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 03:00:39 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:00:39 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 03:00:39 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 03:00:39 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=4352673321215197&nonce=6500220951765553&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683788392402287}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:00:39 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:00:39 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=4352673321215197&nonce=6500220951765553&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683788392402287
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:00:39 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:00:48 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:00:48 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:00:48 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:00:48 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=4352673321215197&nonce=6500220951765553&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:00:48 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:00:48 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:00:48 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "4352673321215197",
  "Nonce": "6500220951765553",
  "SessionId": "a1b3a18768a269735cfd14597abf0780",
  "Raw": {
    "state": "4352673321215197",
    "nonce": "6500220951765553",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:00:48 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:00:48 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "4352673321215197",
  "Nonce": "6500220951765553",
  "SessionId": "a1b3a18768a269735cfd14597abf0780",
  "Raw": {
    "state": "4352673321215197",
    "nonce": "6500220951765553",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 28/05/2015 03:00:48 a.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:00:48 a.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:00:48 a.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:00:48 a.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 28/05/2015 03:00:48 a.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:00:48 a.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:00:48 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 28/05/2015 03:00:48 a.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:00:48 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:00:48 a.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:00:49 a.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:00:49 a.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:00:49 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:00:49 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:00:49 a.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:00:49 a.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:00:49 a.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:00:49 a.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:00:49 a.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 28/05/2015 03:00:49 a.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:00:59 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:00:59 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:00:59 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:00:59 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:01:58 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:01:58 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:01:58 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:01:58 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:02:02 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:02:02 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:02:02 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:02:02 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:02:04 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:02:04 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:02:04 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:02:04 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:02:04 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:02:04 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:02:04 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:02:04 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:03:39 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:03:39 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:03:39 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:03:39 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7942775122659569",
  "Nonce": "36873644500965814",
  "Raw": {
    "state": "7942775122659569",
    "nonce": "36873644500965814",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 03:03:39 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:03:39 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 03:03:39 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 03:03:39 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=7942775122659569&nonce=36873644500965814&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683790198933395}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:03:39 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:03:39 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=7942775122659569&nonce=36873644500965814&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683790198933395
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:03:39 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:03:48 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:03:48 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:03:48 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:03:48 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=7942775122659569&nonce=36873644500965814&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:03:48 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:03:48 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:03:48 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7942775122659569",
  "Nonce": "36873644500965814",
  "SessionId": "3177046fa1eb80c8259f345bd3f512c8",
  "Raw": {
    "state": "7942775122659569",
    "nonce": "36873644500965814",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:03:48 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:03:48 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7942775122659569",
  "Nonce": "36873644500965814",
  "SessionId": "3177046fa1eb80c8259f345bd3f512c8",
  "Raw": {
    "state": "7942775122659569",
    "nonce": "36873644500965814",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 28/05/2015 03:03:48 a.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:03:48 a.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:03:48 a.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:03:48 a.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 28/05/2015 03:03:48 a.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:03:48 a.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:03:48 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 28/05/2015 03:03:48 a.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:03:48 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:03:48 a.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:03:49 a.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:03:49 a.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:03:49 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:03:49 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:03:49 a.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:03:49 a.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:03:49 a.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:03:49 a.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:03:49 a.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 28/05/2015 03:03:49 a.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:03:59 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:03:59 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:03:59 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:03:59 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:05 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:05 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:05 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:05 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:07 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:07 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:07 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:07 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:19 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:19 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:19 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:19 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:21 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:21 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:21 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:21 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:25 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:25 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:25 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:25 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:27 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:27 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:27 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:27 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:28 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:28 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:28 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:28 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:30 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:30 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:30 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:30 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:32 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:32 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:32 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:32 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:41 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:41 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:41 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:41 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:45 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:45 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:45 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:45 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:48 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:48 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:48 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:04:48 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:04:50 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:04:50 a.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 28/05/2015 03:04:50 a.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:50 a.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:04:50 a.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 28/05/2015 03:04:50 a.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:04:50 a.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 28/05/2015 03:04:50 a.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 03:04:50 a.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635683790904161682}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:04:50 a.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:04:50 a.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:04:50 a.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:04:50 a.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:04:50 a.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:04:50 a.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:04:51 a.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:06:41 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:06:42 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:06:42 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:06:42 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7563271969681274",
  "Nonce": "8823590652613752",
  "Raw": {
    "state": "7563271969681274",
    "nonce": "8823590652613752",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 03:06:42 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:06:42 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 03:06:42 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 03:06:42 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=7563271969681274&nonce=8823590652613752&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683792021682070}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:06:42 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:06:42 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=7563271969681274&nonce=8823590652613752&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683792021682070
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:06:42 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:06:48 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:06:48 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:06:48 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:06:48 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=7563271969681274&nonce=8823590652613752&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:06:48 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:06:48 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:06:48 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7563271969681274",
  "Nonce": "8823590652613752",
  "SessionId": "b09f6e49cacc862caa6484439edd9ff1",
  "Raw": {
    "state": "7563271969681274",
    "nonce": "8823590652613752",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:06:48 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:06:48 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7563271969681274",
  "Nonce": "8823590652613752",
  "SessionId": "b09f6e49cacc862caa6484439edd9ff1",
  "Raw": {
    "state": "7563271969681274",
    "nonce": "8823590652613752",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 28/05/2015 03:06:48 a.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:06:48 a.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:06:48 a.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:06:48 a.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 28/05/2015 03:06:48 a.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:06:48 a.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:06:48 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 28/05/2015 03:06:48 a.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:06:48 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:06:48 a.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:06:48 a.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:06:48 a.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:06:48 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:06:48 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:06:48 a.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:06:48 a.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:06:48 a.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:06:48 a.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:06:48 a.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 28/05/2015 03:06:48 a.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:06:50 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:06:50 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:06:50 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:06:50 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:06:53 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:06:53 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:06:53 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:06:53 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:06:54 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:06:54 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:06:54 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:06:54 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:06:58 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:06:58 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:06:58 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:06:58 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:07:01 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:07:01 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:07:01 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:07:01 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:07:09 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:07:09 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:07:09 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:07:09 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:07:14 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:07:14 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:07:14 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:07:14 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:07:38 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:07:38 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:07:38 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:07:38 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:09:51 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:09:51 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:09:51 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:09:51 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:11:26 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:11:26 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:11:26 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:11:26 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7211409147993492",
  "Nonce": "4225779821741407",
  "Raw": {
    "state": "7211409147993492",
    "nonce": "4225779821741407",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 03:11:26 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:11:26 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 03:11:26 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 03:11:26 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=7211409147993492&nonce=4225779821741407&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683794862836300}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:11:26 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:11:26 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=7211409147993492&nonce=4225779821741407&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683794862836300
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:11:26 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:11:32 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:11:32 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:11:32 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:11:32 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=7211409147993492&nonce=4225779821741407&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:11:32 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:11:32 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:11:32 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7211409147993492",
  "Nonce": "4225779821741407",
  "SessionId": "c7cc82171232c3e1b1dbe250c4b394f5",
  "Raw": {
    "state": "7211409147993492",
    "nonce": "4225779821741407",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:11:32 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:11:32 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7211409147993492",
  "Nonce": "4225779821741407",
  "SessionId": "c7cc82171232c3e1b1dbe250c4b394f5",
  "Raw": {
    "state": "7211409147993492",
    "nonce": "4225779821741407",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 28/05/2015 03:11:32 a.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:11:32 a.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:11:32 a.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:11:32 a.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 28/05/2015 03:11:32 a.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:11:32 a.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:11:32 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 28/05/2015 03:11:32 a.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:11:33 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:11:33 a.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:11:33 a.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:11:33 a.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:33 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:33 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:11:33 a.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:11:33 a.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:11:33 a.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:11:33 a.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:11:33 a.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 28/05/2015 03:11:33 a.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:36 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:36 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:36 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:36 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:48 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:48 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:48 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:48 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:49 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:49 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:49 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:49 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:52 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:52 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:52 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:52 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:54 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:54 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:54 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:54 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:55 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:55 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:55 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:55 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:59 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:59 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:11:59 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:11:59 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:12:05 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:12:05 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:12:05 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:12:05 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:12:08 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:12:08 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:12:08 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:12:08 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:12:12 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:12:12 a.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 28/05/2015 03:12:12 a.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:12:12 a.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:12:12 a.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 28/05/2015 03:12:12 a.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:12:12 a.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 28/05/2015 03:12:12 a.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 03:12:12 a.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635683795320973779}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:12:12 a.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:12:12 a.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:12:12 a.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:12:12 a.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:12:12 a.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:12:12 a.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:12:12 a.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 28/05/2015 03:12:12 a.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:12:12 a.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:18:19 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:18:20 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:18:20 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:18:20 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "52308108978484314",
  "Nonce": "5416298488149648",
  "Raw": {
    "state": "52308108978484314",
    "nonce": "5416298488149648",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 03:18:20 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:18:20 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 03:18:20 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 03:18:20 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=52308108978484314&nonce=5416298488149648&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683799004465539}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:18:20 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:18:20 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=52308108978484314&nonce=5416298488149648&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683799004465539
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:18:20 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:18:31 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:18:31 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:18:31 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:18:31 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=52308108978484314&nonce=5416298488149648&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:18:31 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:18:31 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:18:31 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "52308108978484314",
  "Nonce": "5416298488149648",
  "SessionId": "2b9580c66d20d3e297b81d54d1fb0aa6",
  "Raw": {
    "state": "52308108978484314",
    "nonce": "5416298488149648",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:18:31 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:18:31 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "52308108978484314",
  "Nonce": "5416298488149648",
  "SessionId": "2b9580c66d20d3e297b81d54d1fb0aa6",
  "Raw": {
    "state": "52308108978484314",
    "nonce": "5416298488149648",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:18:31 a.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:18:31 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:18:36 a.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:18:36 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:18:36 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "52308108978484314",
  "Nonce": "5416298488149648",
  "SessionId": "2b9580c66d20d3e297b81d54d1fb0aa6",
  "Raw": {
    "state": "52308108978484314",
    "nonce": "5416298488149648",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:18:36 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:18:36 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "52308108978484314",
  "Nonce": "5416298488149648",
  "SessionId": "2b9580c66d20d3e297b81d54d1fb0aa6",
  "Raw": {
    "state": "52308108978484314",
    "nonce": "5416298488149648",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 28/05/2015 03:18:36 a.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:18:36 a.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:18:36 a.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:18:36 a.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 28/05/2015 03:18:36 a.m. +00:00 -- Getting claims for identity token for subject: 2
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:18:36 a.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 28/05/2015 03:18:36 a.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:18:36 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:18:36 a.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:18:36 a.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:18:36 a.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:18:36 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:18:36 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:18:36 a.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:18:36 a.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:18:36 a.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:18:36 a.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:18:36 a.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 28/05/2015 03:18:36 a.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:18:47 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:18:47 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:18:47 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:18:47 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:18:59 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:18:59 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:18:59 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:18:59 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:23:40 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:23:40 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:23:40 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:23:40 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:23:40 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:23:40 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/frame.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "2109710566710102",
  "Nonce": "10587282664015124",
  "PromptMode": "none",
  "SessionId": "2b9580c66d20d3e297b81d54d1fb0aa6",
  "Raw": {
    "state": "2109710566710102",
    "nonce": "10587282664015124",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/frame.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi",
    "prompt": "none"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:23:40 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Error: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:23:40 a.m. +00:00 -- Invalid redirect_uri: http://localhost:59380/frame.html
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/frame.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "2109710566710102",
  "Nonce": "10587282664015124",
  "PromptMode": "none",
  "SessionId": "2b9580c66d20d3e297b81d54d1fb0aa6",
  "Raw": {
    "state": "2109710566710102",
    "nonce": "10587282664015124",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/frame.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi",
    "prompt": "none"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:23:40 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:23:40 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:23:40 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:23:40 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/frame.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "18796055205062503",
  "Nonce": "9352853489431034",
  "PromptMode": "none",
  "SessionId": "2b9580c66d20d3e297b81d54d1fb0aa6",
  "Raw": {
    "state": "18796055205062503",
    "nonce": "9352853489431034",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/frame.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi",
    "prompt": "none"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:23:40 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Error: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:23:40 a.m. +00:00 -- Invalid redirect_uri: http://localhost:59380/frame.html
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/frame.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "18796055205062503",
  "Nonce": "9352853489431034",
  "PromptMode": "none",
  "SessionId": "2b9580c66d20d3e297b81d54d1fb0aa6",
  "Raw": {
    "state": "18796055205062503",
    "nonce": "9352853489431034",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/frame.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi",
    "prompt": "none"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:23:40 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:23:40 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:23:40 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:23:40 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/frame.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "821594645384272",
  "Nonce": "5649558682445658",
  "PromptMode": "none",
  "SessionId": "2b9580c66d20d3e297b81d54d1fb0aa6",
  "Raw": {
    "state": "821594645384272",
    "nonce": "5649558682445658",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/frame.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi",
    "prompt": "none"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:23:40 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Error: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:23:40 a.m. +00:00 -- Invalid redirect_uri: http://localhost:59380/frame.html
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/frame.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "821594645384272",
  "Nonce": "5649558682445658",
  "PromptMode": "none",
  "SessionId": "2b9580c66d20d3e297b81d54d1fb0aa6",
  "Raw": {
    "state": "821594645384272",
    "nonce": "5649558682445658",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/frame.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi",
    "prompt": "none"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:23:40 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:36:18 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:36:18 a.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 28/05/2015 03:36:18 a.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 28/05/2015 03:36:18 a.m. +00:00 -- End session request validation success
{
  "SubjectId": "2"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:36:18 a.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 28/05/2015 03:36:18 a.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 03:36:18 a.m. +00:00 -- Protecting message: {"Created":635683809785519050}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:18 a.m. +00:00 -- Logout prompt for subject: 2
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:18 a.m. +00:00 -- EnableSignOutPrompt set to true, rendering logout prompt
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:22 a.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:22 a.m. +00:00 -- Logout requested for subject: 2
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:22 a.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:22 a.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 28/05/2015 03:36:22 a.m. +00:00 -- unhandled exception in Autofac middleware
System.OperationCanceledException: Operación cancelada.
   en System.Threading.CancellationToken.ThrowOperationCanceledException()
   en System.Web.Http.HostAuthenticationFilter.<AuthenticateAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Owin.PassiveAuthenticationMessageHandler.<SendAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.HttpServer.<SendAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:36:22 a.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:36:47 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:36:48 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:36:48 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:36:48 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7132768034794866",
  "Nonce": "973131278891875",
  "Raw": {
    "state": "7132768034794866",
    "nonce": "973131278891875",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 28/05/2015 03:36:48 a.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:36:48 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 28/05/2015 03:36:48 a.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 03:36:48 a.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=7132768034794866&nonce=973131278891875&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635683810082885352}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:48 a.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:48 a.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=7132768034794866&nonce=973131278891875&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635683810082885352
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:48 a.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:55 a.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:55 a.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:55 a.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:36:55 a.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=7132768034794866&nonce=973131278891875&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:36:55 a.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:36:55 a.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:36:55 a.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7132768034794866",
  "Nonce": "973131278891875",
  "SessionId": "f36e105ef21fc9db0df1e5f35a4c7571",
  "Raw": {
    "state": "7132768034794866",
    "nonce": "973131278891875",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:36:55 a.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 28/05/2015 03:36:55 a.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "7132768034794866",
  "Nonce": "973131278891875",
  "SessionId": "f36e105ef21fc9db0df1e5f35a4c7571",
  "Raw": {
    "state": "7132768034794866",
    "nonce": "973131278891875",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 28/05/2015 03:36:55 a.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:36:55 a.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:36:55 a.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:36:55 a.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 28/05/2015 03:36:55 a.m. +00:00 -- Getting claims for identity token for subject: 2
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 28/05/2015 03:36:55 a.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 28/05/2015 03:36:55 a.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 28/05/2015 03:36:55 a.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:36:55 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:36:55 a.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:36:56 a.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:36:56 a.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:36:56 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:36:56 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:36:56 a.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:36:56 a.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:36:56 a.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 28/05/2015 03:36:56 a.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 28/05/2015 03:36:56 a.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 28/05/2015 03:36:56 a.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:36:59 a.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:36:59 a.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:36:59 a.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 28/05/2015 03:36:59 a.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 28/05/2015 03:37:04 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:37:04 a.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 28/05/2015 03:37:04 a.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:37:04 a.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 28/05/2015 03:37:04 a.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 28/05/2015 03:37:04 a.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "2",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:37:04 a.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 28/05/2015 03:37:04 a.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 28/05/2015 03:37:04 a.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635683810248571136}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:37:04 a.m. +00:00 -- Logout prompt for subject: 2
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:37:04 a.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:37:04 a.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:37:04 a.m. +00:00 -- Logout requested for subject: 2
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:37:04 a.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 28/05/2015 03:37:04 a.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 28/05/2015 03:37:05 a.m. +00:00 -- unhandled exception in Autofac middleware
System.OperationCanceledException: Operación cancelada.
   en System.Threading.CancellationToken.ThrowOperationCanceledException()
   en System.Web.Http.HostAuthenticationFilter.<AuthenticateAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Owin.PassiveAuthenticationMessageHandler.<SendAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.HttpServer.<SendAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 28/05/2015 03:37:05 a.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 29/05/2015 09:31:28 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 29/05/2015 09:31:28 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 29/05/2015 09:31:28 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 29/05/2015 09:31:28 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:32:00 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:32:03 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:32:03 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:32:04 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "13338677922361884",
  "Nonce": "6776608937508984",
  "Raw": {
    "state": "13338677922361884",
    "nonce": "6776608937508984",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 09:32:04 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:32:04 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 09:32:04 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 09:32:04 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=13338677922361884&nonce=6776608937508984&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685319238298301}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:32:04 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:32:04 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=13338677922361884&nonce=6776608937508984&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685319238298301
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:32:04 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:32:12 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:32:12 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:32:12 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:32:13 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=13338677922361884&nonce=6776608937508984&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:32:13 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:32:13 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:32:13 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "13338677922361884",
  "Nonce": "6776608937508984",
  "SessionId": "d92f6bd8f45b60711b986a09c6e9ee99",
  "Raw": {
    "state": "13338677922361884",
    "nonce": "6776608937508984",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:32:13 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:32:13 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "13338677922361884",
  "Nonce": "6776608937508984",
  "SessionId": "d92f6bd8f45b60711b986a09c6e9ee99",
  "Raw": {
    "state": "13338677922361884",
    "nonce": "6776608937508984",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:32:13 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:32:13 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:32:17 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:32:17 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:32:17 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "13338677922361884",
  "Nonce": "6776608937508984",
  "SessionId": "d92f6bd8f45b60711b986a09c6e9ee99",
  "Raw": {
    "state": "13338677922361884",
    "nonce": "6776608937508984",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:32:17 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:32:17 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "13338677922361884",
  "Nonce": "6776608937508984",
  "SessionId": "d92f6bd8f45b60711b986a09c6e9ee99",
  "Raw": {
    "state": "13338677922361884",
    "nonce": "6776608937508984",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 09:32:17 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:32:17 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:32:17 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:32:18 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 09:32:18 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:32:18 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 09:32:18 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:32:19 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:32:19 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:32:19 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:32:20 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:32:20 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:32:20 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:32:20 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:32:20 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:32:20 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:32:20 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:32:20 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 09:32:20 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:33:56 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:33:57 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:33:57 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:33:57 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "848237789596618",
  "Nonce": "21986607209183527",
  "Raw": {
    "state": "848237789596618",
    "nonce": "21986607209183527",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 09:33:57 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:33:57 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 09:33:57 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 09:33:57 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=848237789596618&nonce=21986607209183527&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685320371225000}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:33:57 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:33:57 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=848237789596618&nonce=21986607209183527&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685320371225000
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:33:57 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:34:03 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:34:03 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:34:03 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:34:03 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=848237789596618&nonce=21986607209183527&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:34:03 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:34:03 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:34:03 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "848237789596618",
  "Nonce": "21986607209183527",
  "SessionId": "d1c7f972634d68e2680dfdd3fffedfb3",
  "Raw": {
    "state": "848237789596618",
    "nonce": "21986607209183527",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:34:03 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:34:03 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "848237789596618",
  "Nonce": "21986607209183527",
  "SessionId": "d1c7f972634d68e2680dfdd3fffedfb3",
  "Raw": {
    "state": "848237789596618",
    "nonce": "21986607209183527",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 09:34:03 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:34:03 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:34:03 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:34:03 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 09:34:03 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:34:03 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:34:03 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 09:34:03 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:34:04 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:34:04 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:34:04 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:34:04 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:34:04 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:34:04 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:34:04 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:34:04 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:34:04 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:34:04 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:34:04 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 09:34:04 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:34:18 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:34:18 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:34:18 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:34:18 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:37:57 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:37:57 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:37:57 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:37:57 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "9705159867125056",
  "Nonce": "43399802839759674",
  "Raw": {
    "state": "9705159867125056",
    "nonce": "43399802839759674",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 09:37:57 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:37:57 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 09:37:57 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 09:37:57 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=9705159867125056&nonce=43399802839759674&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685322777645283}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:37:57 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:37:57 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=9705159867125056&nonce=43399802839759674&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685322777645283
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:37:57 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:40:41 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:40:41 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:40:41 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:40:41 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "10287873244086365",
  "Nonce": "8108248206314106",
  "Raw": {
    "state": "10287873244086365",
    "nonce": "8108248206314106",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 09:40:41 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:40:41 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 09:40:41 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 09:40:41 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=10287873244086365&nonce=8108248206314106&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685324415885786}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:40:41 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:40:41 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=10287873244086365&nonce=8108248206314106&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685324415885786
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:40:41 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:40:49 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:40:49 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:40:49 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:40:49 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=10287873244086365&nonce=8108248206314106&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:40:49 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:40:49 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:40:49 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "10287873244086365",
  "Nonce": "8108248206314106",
  "SessionId": "32ae03c443a80056fca99722e3eb74ea",
  "Raw": {
    "state": "10287873244086365",
    "nonce": "8108248206314106",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:40:49 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:40:49 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "10287873244086365",
  "Nonce": "8108248206314106",
  "SessionId": "32ae03c443a80056fca99722e3eb74ea",
  "Raw": {
    "state": "10287873244086365",
    "nonce": "8108248206314106",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 09:40:49 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:40:49 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:40:49 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:40:49 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 09:40:49 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:40:49 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:40:50 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 09:40:50 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:40:50 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:40:50 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:40:50 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:40:50 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:40:50 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:40:50 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:40:50 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:40:50 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:40:50 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:40:50 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:40:50 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 09:40:50 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:40:54 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:40:54 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:40:54 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:40:54 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:40:57 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:40:57 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:40:57 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:40:57 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:41:02 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:41:02 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:41:02 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:41:02 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:41:05 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:41:05 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:41:05 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:41:05 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:41:09 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:41:09 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:41:09 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:41:09 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:41:10 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:41:10 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:41:10 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:41:10 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:41:13 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 09:41:13 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 09:41:13 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:41:13 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:41:13 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 09:41:14 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 09:41:14 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 09:41:14 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 09:41:14 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685324740167067}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:41:14 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:41:14 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:41:14 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:41:14 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:41:14 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:41:14 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 09:41:15 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 09:41:15 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 29/05/2015 09:41:15 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:43:43 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:43:43 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:43:43 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:43:43 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "41859092788416534",
  "Nonce": "5572450600012655",
  "Raw": {
    "state": "41859092788416534",
    "nonce": "5572450600012655",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 09:43:43 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:43:43 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 09:43:43 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 09:43:43 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=41859092788416534&nonce=5572450600012655&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685326234736447}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:43:43 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:43:43 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=41859092788416534&nonce=5572450600012655&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685326234736447
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:43:43 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:43:47 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:43:47 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:43:47 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:43:47 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=41859092788416534&nonce=5572450600012655&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:43:47 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:43:47 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:43:47 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "41859092788416534",
  "Nonce": "5572450600012655",
  "SessionId": "b24dc99dc8e8fd00005f756325ab7092",
  "Raw": {
    "state": "41859092788416534",
    "nonce": "5572450600012655",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:43:47 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:43:47 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "41859092788416534",
  "Nonce": "5572450600012655",
  "SessionId": "b24dc99dc8e8fd00005f756325ab7092",
  "Raw": {
    "state": "41859092788416534",
    "nonce": "5572450600012655",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 09:43:47 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:43:47 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:43:47 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:43:47 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 09:43:47 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:43:47 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:43:48 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 09:43:48 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:43:48 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:43:48 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:43:48 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:43:48 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:43:48 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:43:48 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:43:48 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:43:48 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:43:48 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:43:48 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:43:48 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 09:43:48 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:43:51 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:43:51 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:43:51 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:43:51 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:43:54 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:43:54 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:43:54 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:43:54 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:43:56 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:43:56 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:43:56 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:43:56 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:43:58 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:43:58 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:43:58 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:43:58 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:44:00 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:44:00 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:44:00 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:44:00 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:44:15 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:44:15 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:44:15 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:44:15 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:44:17 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:44:17 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:44:17 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:44:17 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:44:19 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:44:19 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:44:19 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 09:44:19 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:44:21 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 09:44:21 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 09:44:21 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:44:21 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:44:21 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 09:44:21 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 09:44:21 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 09:44:21 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 09:44:22 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685326619879020}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:44:22 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:44:22 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:44:22 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:44:22 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:44:22 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:44:22 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 09:44:23 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 29/05/2015 09:44:23 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 09:44:23 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:45:43 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:45:43 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:45:43 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:45:43 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "9557217068441081",
  "Nonce": "676696361632371",
  "Raw": {
    "state": "9557217068441081",
    "nonce": "676696361632371",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 09:45:43 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:45:43 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 09:45:43 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 09:45:43 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=9557217068441081&nonce=676696361632371&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685327439205364}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:45:43 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:45:43 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=9557217068441081&nonce=676696361632371&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685327439205364
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:45:43 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:45:49 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:45:49 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:45:49 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:45:49 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=9557217068441081&nonce=676696361632371&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:45:49 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:45:49 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:45:49 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "9557217068441081",
  "Nonce": "676696361632371",
  "SessionId": "11bae5ee38704c902cd46bd9034e3042",
  "Raw": {
    "state": "9557217068441081",
    "nonce": "676696361632371",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:45:49 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 09:45:49 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "9557217068441081",
  "Nonce": "676696361632371",
  "SessionId": "11bae5ee38704c902cd46bd9034e3042",
  "Raw": {
    "state": "9557217068441081",
    "nonce": "676696361632371",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 09:45:49 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:45:49 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:45:49 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:45:49 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 09:45:49 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 09:45:49 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 09:45:49 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 09:45:49 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:45:50 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:45:50 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:45:50 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:45:50 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:45:50 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:45:50 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:45:50 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:45:50 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:45:50 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 09:45:50 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 09:45:50 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 09:45:50 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 09:46:45 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 09:46:46 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 09:46:46 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:46:46 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 09:46:46 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 09:46:46 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 09:46:46 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 09:46:46 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 09:46:46 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685328061416138}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:46:46 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:46:46 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:46:46 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:46:46 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:46:46 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 09:46:46 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 09:46:46 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 29/05/2015 09:46:46 p.m. +00:00 -- unhandled exception in Autofac middleware
System.OperationCanceledException: Operación cancelada.
   en System.Threading.CancellationToken.ThrowOperationCanceledException()
   en System.Web.Http.HostAuthenticationFilter.<AuthenticateAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Owin.PassiveAuthenticationMessageHandler.<SendAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.HttpServer.<SendAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 10:55:05 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 10:55:05 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 10:55:05 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 10:55:05 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "6921039664055192",
  "Nonce": "1125340852994256",
  "Raw": {
    "state": "6921039664055192",
    "nonce": "1125340852994256",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 10:55:05 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 10:55:05 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 10:55:05 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 10:55:05 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=6921039664055192&nonce=1125340852994256&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685369057477960}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:05 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:05 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=6921039664055192&nonce=1125340852994256&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685369057477960
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:05 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:13 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:13 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:13 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:13 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=6921039664055192&nonce=1125340852994256&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 10:55:13 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 10:55:13 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 10:55:13 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "6921039664055192",
  "Nonce": "1125340852994256",
  "SessionId": "dfb87b1a4609cdab7679e5b9f1187c3a",
  "Raw": {
    "state": "6921039664055192",
    "nonce": "1125340852994256",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 10:55:13 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 10:55:13 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "6921039664055192",
  "Nonce": "1125340852994256",
  "SessionId": "dfb87b1a4609cdab7679e5b9f1187c3a",
  "Raw": {
    "state": "6921039664055192",
    "nonce": "1125340852994256",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 10:55:13 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 10:55:13 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 10:55:13 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 10:55:13 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 10:55:13 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 10:55:13 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 10:55:13 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 10:55:13 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 10:55:14 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 10:55:14 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 10:55:14 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 10:55:14 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 10:55:14 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 10:55:14 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 10:55:14 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 10:55:14 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 10:55:14 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 10:55:14 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 10:55:14 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 10:55:14 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 10:55:17 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 10:55:17 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 10:55:17 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 10:55:17 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 10:55:17 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 10:55:17 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 10:55:17 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 10:55:17 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 10:55:17 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685369178149882}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:17 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:17 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:17 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:17 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:17 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 10:55:17 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 29/05/2015 10:55:18 p.m. +00:00 -- unhandled exception in Autofac middleware
System.OperationCanceledException: Operación cancelada.
   en System.Threading.CancellationToken.ThrowOperationCanceledException()
   en System.Web.Http.HostAuthenticationFilter.<AuthenticateAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Owin.PassiveAuthenticationMessageHandler.<SendAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.HttpServer.<SendAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 10:55:18 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:16:01 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:16:02 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:16:02 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:16:02 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "25615242060664963",
  "Nonce": "1087365385844424",
  "Raw": {
    "state": "25615242060664963",
    "nonce": "1087365385844424",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:16:02 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:16:02 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:16:02 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:16:02 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=25615242060664963&nonce=1087365385844424&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685381621143184}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:16:02 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:16:02 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=25615242060664963&nonce=1087365385844424&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685381621143184
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:16:02 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:16:11 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:16:12 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:16:12 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:16:12 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "13752746117539531",
  "Nonce": "259227224214704",
  "Raw": {
    "state": "13752746117539531",
    "nonce": "259227224214704",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:16:12 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:16:12 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:16:12 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:16:12 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=13752746117539531&nonce=259227224214704&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685381720333799}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:16:12 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:16:12 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=13752746117539531&nonce=259227224214704&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685381720333799
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:16:12 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:16:38 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:16:38 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:16:38 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:16:38 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "10603034472619798",
  "Nonce": "873921480177398",
  "Raw": {
    "state": "10603034472619798",
    "nonce": "873921480177398",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:16:38 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:16:38 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:16:38 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:16:38 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=10603034472619798&nonce=873921480177398&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685381987183817}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:16:38 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:16:38 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=10603034472619798&nonce=873921480177398&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685381987183817
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:16:38 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:17:18 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:17:18 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:17:18 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:17:18 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "10194881077857384",
  "Nonce": "7222498359024382",
  "Raw": {
    "state": "10194881077857384",
    "nonce": "7222498359024382",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:17:18 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:17:18 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:17:18 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:17:18 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=10194881077857384&nonce=7222498359024382&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685382383240757}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:17:18 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:17:18 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=10194881077857384&nonce=7222498359024382&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685382383240757
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:17:18 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:18:01 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:18:01 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:18:01 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:18:01 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=10194881077857384&nonce=7222498359024382&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:18:01 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:18:01 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:18:01 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "10194881077857384",
  "Nonce": "7222498359024382",
  "SessionId": "15ebef7254abc7644388915367c30d80",
  "Raw": {
    "state": "10194881077857384",
    "nonce": "7222498359024382",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:18:01 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:18:01 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "10194881077857384",
  "Nonce": "7222498359024382",
  "SessionId": "15ebef7254abc7644388915367c30d80",
  "Raw": {
    "state": "10194881077857384",
    "nonce": "7222498359024382",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 11:18:01 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:18:01 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:18:01 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:18:02 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 11:18:02 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:18:02 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:18:02 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 11:18:02 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:18:02 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:18:02 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:18:02 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:18:02 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:18:02 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:18:02 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:18:02 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:18:02 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:18:02 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:18:02 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:18:02 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 11:18:02 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:18:54 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:18:54 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:18:54 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:18:54 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:18:54 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:18:54 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:18:54 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 11:18:54 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:18:54 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685383341790339}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:18:54 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:18:54 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:18:54 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:18:54 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:18:54 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:18:54 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:18:54 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 29/05/2015 11:18:54 p.m. +00:00 -- unhandled exception in Autofac middleware
System.ObjectDisposedException: CancellationTokenSource se ha desechado.
   en System.Threading.CancellationTokenSource.ThrowObjectDisposedException()
   en System.Threading.CancellationTokenSource.InternalRegister(Action`1 callback, Object stateForCallback, SynchronizationContext targetSyncContext, ExecutionContext executionContext)
   en System.Threading.CancellationToken.Register(Action`1 callback, Object state, Boolean useSynchronizationContext, Boolean useExecutionContext)
   en System.Threading.CancellationToken.Register(Action`1 callback, Object state)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.OwinHttpListenerContext.GetCallCancelled()
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.CallEnvironment.get_CallCancelled()
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.CallEnvironment.PropertiesTryGetValue(String key, Object& value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.CallEnvironment.TryGetValue(String key, Object& value)
   en Microsoft.Owin.OwinRequest.Get[T](String key) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en Microsoft.Owin.OwinRequest.get_CallCancelled() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:20:58 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:20:58 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:20:58 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:20:58 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "4582892983518034",
  "Nonce": "10991117155433302",
  "Raw": {
    "state": "4582892983518034",
    "nonce": "10991117155433302",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:20:58 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:20:58 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:20:58 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:20:58 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=4582892983518034&nonce=10991117155433302&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685384584058234}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:20:58 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:20:58 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=4582892983518034&nonce=10991117155433302&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685384584058234
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:20:58 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:21:30 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:21:30 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:21:30 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:21:30 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "4751119891807112",
  "Nonce": "8513218815171886",
  "Raw": {
    "state": "4751119891807112",
    "nonce": "8513218815171886",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:21:30 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:21:30 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:21:30 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:21:30 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=4751119891807112&nonce=8513218815171886&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685384906729106}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:30 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:30 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=4751119891807112&nonce=8513218815171886&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685384906729106
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:30 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:36 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:36 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:36 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:36 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=4751119891807112&nonce=8513218815171886&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:21:36 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:21:36 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:21:36 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "4751119891807112",
  "Nonce": "8513218815171886",
  "SessionId": "d4194dc97ca2e33a806de3d13989d9a1",
  "Raw": {
    "state": "4751119891807112",
    "nonce": "8513218815171886",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:21:36 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:21:36 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "4751119891807112",
  "Nonce": "8513218815171886",
  "SessionId": "d4194dc97ca2e33a806de3d13989d9a1",
  "Raw": {
    "state": "4751119891807112",
    "nonce": "8513218815171886",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 11:21:36 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:21:36 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:21:36 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:21:36 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 11:21:36 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:21:36 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:21:36 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 11:21:36 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:21:36 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:21:36 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:21:37 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:21:37 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:21:37 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:21:37 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:21:37 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:21:37 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:21:37 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:21:37 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:21:37 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 11:21:37 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:21:41 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:21:41 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:21:41 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:21:41 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:21:41 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:21:41 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:21:41 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 11:21:41 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:21:41 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685385014515854}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:41 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:41 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:41 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:41 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:41 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:41 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:21:42 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:21:48 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:21:48 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:21:48 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:21:48 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "316246784552161",
  "Nonce": "4333272478863371",
  "Raw": {
    "state": "316246784552161",
    "nonce": "4333272478863371",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:21:48 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:21:48 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:21:48 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:21:48 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=316246784552161&nonce=4333272478863371&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685385088560994}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:48 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:48 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=316246784552161&nonce=4333272478863371&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685385088560994
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:48 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:55 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:55 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:55 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:21:55 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=316246784552161&nonce=4333272478863371&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:21:55 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:21:55 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:21:55 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "316246784552161",
  "Nonce": "4333272478863371",
  "SessionId": "0078eb892bd6400472b6da0fb063c6ce",
  "Raw": {
    "state": "316246784552161",
    "nonce": "4333272478863371",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:21:55 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:21:55 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "316246784552161",
  "Nonce": "4333272478863371",
  "SessionId": "0078eb892bd6400472b6da0fb063c6ce",
  "Raw": {
    "state": "316246784552161",
    "nonce": "4333272478863371",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:21:55 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:21:55 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:22:14 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:22:14 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:22:14 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "316246784552161",
  "Nonce": "4333272478863371",
  "SessionId": "0078eb892bd6400472b6da0fb063c6ce",
  "Raw": {
    "state": "316246784552161",
    "nonce": "4333272478863371",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:22:14 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:22:14 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "316246784552161",
  "Nonce": "4333272478863371",
  "SessionId": "0078eb892bd6400472b6da0fb063c6ce",
  "Raw": {
    "state": "316246784552161",
    "nonce": "4333272478863371",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 11:22:14 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:22:14 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:22:14 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:22:14 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 11:22:14 p.m. +00:00 -- Getting claims for identity token for subject: 2
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:22:14 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 11:22:14 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:22:14 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:22:14 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:22:15 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:22:15 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:22:15 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:22:15 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:22:15 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:22:15 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:22:15 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:22:15 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:22:15 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 11:22:15 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:22:17 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:22:17 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:22:17 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:22:17 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:22:17 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:22:17 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "2",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:22:17 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 11:22:17 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:22:17 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685385370922096}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:17 p.m. +00:00 -- Logout prompt for subject: 2
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:17 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:17 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:17 p.m. +00:00 -- Logout requested for subject: 2
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:17 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:17 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:22:17 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 29/05/2015 11:22:17 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:22:17 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:22:22 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:22:22 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:22:22 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:22:22 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "13340128573531145",
  "Nonce": "6045634106882696",
  "Raw": {
    "state": "13340128573531145",
    "nonce": "6045634106882696",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:22:22 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:22:22 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:22:22 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:22:22 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=13340128573531145&nonce=6045634106882696&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685385427852593}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:22 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:22 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=13340128573531145&nonce=6045634106882696&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685385427852593
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:22 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:28 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:28 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:28 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:28 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=13340128573531145&nonce=6045634106882696&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:22:28 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:22:28 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:22:28 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "13340128573531145",
  "Nonce": "6045634106882696",
  "SessionId": "4f462e5fe868157cef80175deb4319d0",
  "Raw": {
    "state": "13340128573531145",
    "nonce": "6045634106882696",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:22:28 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:22:28 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "13340128573531145",
  "Nonce": "6045634106882696",
  "SessionId": "4f462e5fe868157cef80175deb4319d0",
  "Raw": {
    "state": "13340128573531145",
    "nonce": "6045634106882696",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 11:22:28 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:22:28 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:22:28 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:22:28 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 11:22:28 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:22:28 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:22:28 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 11:22:28 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:22:28 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:22:28 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:22:28 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:22:28 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:22:28 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:22:28 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:22:28 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:22:28 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:22:28 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:22:28 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:22:28 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 11:22:28 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:22:32 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:22:32 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:22:32 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:22:32 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:22:32 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:22:32 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:22:32 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 11:22:32 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:22:32 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685385522229800}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:32 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:32 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:32 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:32 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:32 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:22:32 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:22:32 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:22:32 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 29/05/2015 11:22:32 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:23:17 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:23:18 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:23:18 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:23:18 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "1762804531174127",
  "Nonce": "8793768365982912",
  "Raw": {
    "state": "1762804531174127",
    "nonce": "8793768365982912",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:23:18 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:23:18 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:23:18 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:23:18 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=1762804531174127&nonce=8793768365982912&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685385984650068}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:18 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:18 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=1762804531174127&nonce=8793768365982912&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685385984650068
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:18 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:24 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:24 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:24 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:24 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=1762804531174127&nonce=8793768365982912&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:23:24 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:23:24 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:23:24 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "1762804531174127",
  "Nonce": "8793768365982912",
  "SessionId": "06bbdcb77c1b339be4253930cb2a217b",
  "Raw": {
    "state": "1762804531174127",
    "nonce": "8793768365982912",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:23:24 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:23:24 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "1762804531174127",
  "Nonce": "8793768365982912",
  "SessionId": "06bbdcb77c1b339be4253930cb2a217b",
  "Raw": {
    "state": "1762804531174127",
    "nonce": "8793768365982912",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 11:23:24 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:23:24 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:23:24 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:23:24 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 11:23:24 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:23:24 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:23:25 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 11:23:25 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:23:25 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:23:25 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:23:25 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:23:25 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:23:25 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:23:25 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:23:25 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:23:25 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:23:25 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:23:25 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:23:25 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 11:23:25 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:23:29 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:23:29 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:23:29 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:23:29 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:23:29 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:23:29 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:23:29 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 11:23:29 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:23:29 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685386097534074}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:29 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:29 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:29 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:29 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:29 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:23:29 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:23:30 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 29/05/2015 11:23:30 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:23:30 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 29/05/2015 11:23:43 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 29/05/2015 11:23:43 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 29/05/2015 11:23:43 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 29/05/2015 11:23:43 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:24:06 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:24:08 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:24:08 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:24:08 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "15552854429151048",
  "Nonce": "4877759869596147",
  "Raw": {
    "state": "15552854429151048",
    "nonce": "4877759869596147",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:24:08 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:24:08 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:24:08 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:24:08 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=15552854429151048&nonce=4877759869596147&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685386480592011}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:24:08 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:24:08 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=15552854429151048&nonce=4877759869596147&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685386480592011
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:24:08 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:24:15 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:24:15 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:24:15 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:24:15 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=15552854429151048&nonce=4877759869596147&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:24:16 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:24:16 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:24:16 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "15552854429151048",
  "Nonce": "4877759869596147",
  "SessionId": "338db6e2cb3877432df5858c03679d1f",
  "Raw": {
    "state": "15552854429151048",
    "nonce": "4877759869596147",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:24:16 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:24:16 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "15552854429151048",
  "Nonce": "4877759869596147",
  "SessionId": "338db6e2cb3877432df5858c03679d1f",
  "Raw": {
    "state": "15552854429151048",
    "nonce": "4877759869596147",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:24:16 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:24:16 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:25:13 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:25:13 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:25:13 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "15552854429151048",
  "Nonce": "4877759869596147",
  "SessionId": "338db6e2cb3877432df5858c03679d1f",
  "Raw": {
    "state": "15552854429151048",
    "nonce": "4877759869596147",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:25:13 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:25:13 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "15552854429151048",
  "Nonce": "4877759869596147",
  "SessionId": "338db6e2cb3877432df5858c03679d1f",
  "Raw": {
    "state": "15552854429151048",
    "nonce": "4877759869596147",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 11:25:13 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html#error=access_denied&state=15552854429151048
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:43:58 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:43:58 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:43:58 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:43:58 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "9042826120701069",
  "Nonce": "1139247121712133",
  "Raw": {
    "state": "9042826120701069",
    "nonce": "1139247121712133",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:43:58 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:43:58 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:43:58 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:43:58 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=9042826120701069&nonce=1139247121712133&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685398386724937}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:43:58 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:43:58 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=9042826120701069&nonce=1139247121712133&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685398386724937
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:43:58 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:44:05 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:44:05 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:44:05 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:44:05 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=9042826120701069&nonce=1139247121712133&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:44:05 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:44:05 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:44:05 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "9042826120701069",
  "Nonce": "1139247121712133",
  "SessionId": "6ede0a9ad65bf05a43254dbbe3bab574",
  "Raw": {
    "state": "9042826120701069",
    "nonce": "1139247121712133",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:44:05 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:44:05 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "9042826120701069",
  "Nonce": "1139247121712133",
  "SessionId": "6ede0a9ad65bf05a43254dbbe3bab574",
  "Raw": {
    "state": "9042826120701069",
    "nonce": "1139247121712133",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:44:05 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:44:05 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:44:09 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:44:09 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:44:09 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "9042826120701069",
  "Nonce": "1139247121712133",
  "SessionId": "6ede0a9ad65bf05a43254dbbe3bab574",
  "Raw": {
    "state": "9042826120701069",
    "nonce": "1139247121712133",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:44:09 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:44:09 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "9042826120701069",
  "Nonce": "1139247121712133",
  "SessionId": "6ede0a9ad65bf05a43254dbbe3bab574",
  "Raw": {
    "state": "9042826120701069",
    "nonce": "1139247121712133",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 11:44:09 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:44:09 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:44:09 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:44:09 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 11:44:09 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:44:09 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 11:44:09 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:44:09 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:44:10 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:44:15 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:44:15 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:44:15 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:44:15 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:44:15 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:44:15 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:44:15 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:44:15 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:44:15 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 11:44:15 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:44:37 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:44:37 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:44:37 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:44:37 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:44:37 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:44:37 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:44:37 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 11:44:37 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:44:37 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685398777389655}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:44:37 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:44:37 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:44:37 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:44:37 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:44:37 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:44:37 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:44:39 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:45:18 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:45:18 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:45:18 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:45:18 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "6940648189954402",
  "Nonce": "7629294445569238",
  "Raw": {
    "state": "6940648189954402",
    "nonce": "7629294445569238",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:45:18 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:45:18 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:45:18 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:45:18 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=6940648189954402&nonce=7629294445569238&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685399187520087}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:18 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:18 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=6940648189954402&nonce=7629294445569238&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685399187520087
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:18 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:24 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:24 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:24 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:24 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=6940648189954402&nonce=7629294445569238&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:45:24 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:45:24 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:45:24 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "6940648189954402",
  "Nonce": "7629294445569238",
  "SessionId": "63f50a88354cd7d69cca9a572e94abab",
  "Raw": {
    "state": "6940648189954402",
    "nonce": "7629294445569238",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:45:24 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:45:24 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "6940648189954402",
  "Nonce": "7629294445569238",
  "SessionId": "63f50a88354cd7d69cca9a572e94abab",
  "Raw": {
    "state": "6940648189954402",
    "nonce": "7629294445569238",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 11:45:24 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:45:24 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:45:24 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:45:24 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 11:45:24 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:45:24 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:45:24 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 11:45:24 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:45:24 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:45:25 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:45:26 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:45:26 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:45:26 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:45:26 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:45:26 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:45:26 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:45:26 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:45:26 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:45:26 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 11:45:26 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 11:45:28 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:45:28 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:45:28 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 29/05/2015 11:45:28 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:45:30 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:45:30 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:45:30 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:45:30 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:45:30 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:45:30 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:45:30 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 11:45:30 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:45:30 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685399308856471}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:30 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:30 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:30 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:30 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:30 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:45:30 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:45:31 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:45:31 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 29/05/2015 11:45:31 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:50:29 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:50:29 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:29 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:29 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "8536350390277241",
  "Nonce": "7334598880530802",
  "Raw": {
    "state": "8536350390277241",
    "nonce": "7334598880530802",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:50:29 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:50:29 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:50:29 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:50:29 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=8536350390277241&nonce=7334598880530802&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685402294237205}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:29 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:29 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=8536350390277241&nonce=7334598880530802&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685402294237205
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:29 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:35 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:35 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:35 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:35 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=8536350390277241&nonce=7334598880530802&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:50:35 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:35 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:35 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "8536350390277241",
  "Nonce": "7334598880530802",
  "SessionId": "65bb7408de9064fd165a54c9dca65fd6",
  "Raw": {
    "state": "8536350390277241",
    "nonce": "7334598880530802",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:35 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:35 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "8536350390277241",
  "Nonce": "7334598880530802",
  "SessionId": "65bb7408de9064fd165a54c9dca65fd6",
  "Raw": {
    "state": "8536350390277241",
    "nonce": "7334598880530802",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 11:50:35 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:50:35 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:50:35 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:50:35 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 11:50:35 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:50:35 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:50:35 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 11:50:35 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:50:35 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:50:35 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:50:36 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:50:36 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:50:36 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:50:36 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:50:36 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:50:36 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:50:36 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:50:36 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:50:36 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 11:50:36 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:50:39 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:50:39 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:50:39 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:50:39 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:50:39 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:50:39 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:50:39 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 11:50:39 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:50:39 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685402397160514}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:39 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:39 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:39 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:39 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:39 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:39 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:50:40 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:50:40 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 29/05/2015 11:50:41 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:50:45 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:50:45 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:45 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:45 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "14708093065229672",
  "Nonce": "10773270476374974",
  "Raw": {
    "state": "14708093065229672",
    "nonce": "10773270476374974",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:50:45 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:50:45 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:50:45 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:50:45 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=14708093065229672&nonce=10773270476374974&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685402457003096}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:45 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:45 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=14708093065229672&nonce=10773270476374974&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685402457003096
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:45 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:51 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:51 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:51 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:51 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=14708093065229672&nonce=10773270476374974&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:50:51 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:51 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:51 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "14708093065229672",
  "Nonce": "10773270476374974",
  "SessionId": "155ab15ae865b340f6225d6b3d3ff585",
  "Raw": {
    "state": "14708093065229672",
    "nonce": "10773270476374974",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:51 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:51 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "14708093065229672",
  "Nonce": "10773270476374974",
  "SessionId": "155ab15ae865b340f6225d6b3d3ff585",
  "Raw": {
    "state": "14708093065229672",
    "nonce": "10773270476374974",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:50:51 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:50:51 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:50:55 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:55 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:55 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "14708093065229672",
  "Nonce": "10773270476374974",
  "SessionId": "155ab15ae865b340f6225d6b3d3ff585",
  "Raw": {
    "state": "14708093065229672",
    "nonce": "10773270476374974",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:55 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:50:55 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "14708093065229672",
  "Nonce": "10773270476374974",
  "SessionId": "155ab15ae865b340f6225d6b3d3ff585",
  "Raw": {
    "state": "14708093065229672",
    "nonce": "10773270476374974",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 11:50:55 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:50:55 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:50:55 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:50:55 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 11:50:55 p.m. +00:00 -- Getting claims for identity token for subject: 2
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:50:55 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 11:50:55 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:50:55 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:50:55 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:50:55 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:50:55 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:50:55 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:50:56 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:50:56 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:50:56 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:50:56 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:50:56 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:50:56 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 11:50:56 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:50:58 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:50:58 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:50:58 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:50:58 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:50:58 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:50:58 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "2",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:50:58 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 11:50:58 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:50:58 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685402587346626}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:58 p.m. +00:00 -- Logout prompt for subject: 2
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:58 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:58 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:58 p.m. +00:00 -- Logout requested for subject: 2
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:58 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:50:58 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:50:59 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 29/05/2015 11:51:00 p.m. +00:00 -- unhandled exception in Autofac middleware
System.InvalidOperationException: No se puede realizar esta operación después de enviar la respuesta.
   en System.Net.HttpListenerResponse.set_ContentLength64(Int64 value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.ResponseHeadersDictionary.Set(String header, String value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.Set(String key, String[] value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.HeadersDictionaryBase.set_Item(String key, String[] value)
   en Microsoft.Owin.HeaderDictionary.System.Collections.Generic.IDictionary<System.String,System.String[]>.set_Item(String key, String[] value) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SetHeadersForEmptyResponse(IDictionary`2 headers) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.SendResponseMessageAsync(HttpRequestMessage request, HttpResponseMessage response, IOwinResponse owinResponse, CancellationToken cancellationToken) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:50:59 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:55:17 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:55:17 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:55:17 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:55:17 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "5943027032845058",
  "Nonce": "8515723551945843",
  "Raw": {
    "state": "5943027032845058",
    "nonce": "8515723551945843",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 29/05/2015 11:55:17 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:55:17 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 29/05/2015 11:55:17 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:55:17 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=5943027032845058&nonce=8515723551945843&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685405179252796}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:17 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:17 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=5943027032845058&nonce=8515723551945843&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685405179252796
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:17 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:23 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:23 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:23 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:23 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=5943027032845058&nonce=8515723551945843&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:55:23 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:55:23 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:55:23 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "5943027032845058",
  "Nonce": "8515723551945843",
  "SessionId": "752781bd309b1b9519bd08a632ef4d27",
  "Raw": {
    "state": "5943027032845058",
    "nonce": "8515723551945843",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:55:23 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 29/05/2015 11:55:23 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "5943027032845058",
  "Nonce": "8515723551945843",
  "SessionId": "752781bd309b1b9519bd08a632ef4d27",
  "Raw": {
    "state": "5943027032845058",
    "nonce": "8515723551945843",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 29/05/2015 11:55:23 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:55:23 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:55:23 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:55:23 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 29/05/2015 11:55:23 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 29/05/2015 11:55:23 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 29/05/2015 11:55:23 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 29/05/2015 11:55:23 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:55:24 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:55:24 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:55:24 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:55:24 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:55:24 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:55:24 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:55:24 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:55:24 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:55:24 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 29/05/2015 11:55:24 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 29/05/2015 11:55:24 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 29/05/2015 11:55:24 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 29/05/2015 11:55:27 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:55:27 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:55:27 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:55:27 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 29/05/2015 11:55:27 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 29/05/2015 11:55:27 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:55:27 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 29/05/2015 11:55:27 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 29/05/2015 11:55:27 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685405274010318}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:27 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:27 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:27 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:27 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:27 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 29/05/2015 11:55:27 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 29/05/2015 11:55:28 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 12:00:23 a.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 30/05/2015 03:12:02 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 30/05/2015 03:12:02 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 30/05/2015 03:12:02 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 30/05/2015 03:12:02 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 03:13:21 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:13:23 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:13:23 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:13:23 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "1339249483411184",
  "Nonce": "9587979132210814",
  "Raw": {
    "state": "1339249483411184",
    "nonce": "9587979132210814",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 30/05/2015 03:13:23 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:13:23 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 30/05/2015 03:13:23 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 30/05/2015 03:13:23 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=1339249483411184&nonce=9587979132210814&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685956028930354}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:13:23 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:13:23 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=1339249483411184&nonce=9587979132210814&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685956028930354
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:13:23 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:13:46 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:13:46 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:13:47 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:13:47 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=1339249483411184&nonce=9587979132210814&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:13:47 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:13:47 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:13:47 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "1339249483411184",
  "Nonce": "9587979132210814",
  "SessionId": "9bb26db33bad080c67a78526d17885cf",
  "Raw": {
    "state": "1339249483411184",
    "nonce": "9587979132210814",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:13:47 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:13:47 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "1339249483411184",
  "Nonce": "9587979132210814",
  "SessionId": "9bb26db33bad080c67a78526d17885cf",
  "Raw": {
    "state": "1339249483411184",
    "nonce": "9587979132210814",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:13:47 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:13:47 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:13:50 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:13:50 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:13:50 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "1339249483411184",
  "Nonce": "9587979132210814",
  "SessionId": "9bb26db33bad080c67a78526d17885cf",
  "Raw": {
    "state": "1339249483411184",
    "nonce": "9587979132210814",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:13:50 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:13:50 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "1339249483411184",
  "Nonce": "9587979132210814",
  "SessionId": "9bb26db33bad080c67a78526d17885cf",
  "Raw": {
    "state": "1339249483411184",
    "nonce": "9587979132210814",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 30/05/2015 03:13:50 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 30/05/2015 03:13:50 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 30/05/2015 03:13:50 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 30/05/2015 03:13:51 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 30/05/2015 03:13:51 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 30/05/2015 03:13:51 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 30/05/2015 03:13:51 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 03:13:51 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 03:13:51 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 30/05/2015 03:13:51 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 30/05/2015 03:13:51 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:13:51 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:13:51 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 30/05/2015 03:13:51 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 30/05/2015 03:13:51 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 30/05/2015 03:13:51 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 30/05/2015 03:13:51 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 30/05/2015 03:13:51 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 30/05/2015 03:13:51 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:14:10 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:14:10 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:14:10 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:14:10 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 03:21:50 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 30/05/2015 03:21:50 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 30/05/2015 03:21:50 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 30/05/2015 03:21:50 p.m. +00:00 -- End session request validation success
{
  "SubjectId": "1"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 30/05/2015 03:21:50 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 30/05/2015 03:21:50 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 30/05/2015 03:21:50 p.m. +00:00 -- Protecting message: {"Created":635685961106780780}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:21:50 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:21:50 p.m. +00:00 -- EnableSignOutPrompt set to true, rendering logout prompt
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:21:53 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:21:53 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:21:53 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:21:53 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 30/05/2015 03:21:54 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 30/05/2015 03:21:54 p.m. +00:00 -- unhandled exception in Autofac middleware
System.OperationCanceledException: Operación cancelada.
   en System.Threading.CancellationToken.ThrowOperationCanceledException()
   en System.Web.Http.HostAuthenticationFilter.<AuthenticateAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Controllers.AuthenticationFilterResult.<ExecuteAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Dispatcher.HttpControllerDispatcher.<SendAsync>d__1.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Owin.PassiveAuthenticationMessageHandler.<SendAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.HttpServer.<SendAsync>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 03:22:17 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:22:17 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:22:17 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:22:17 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "17992213613691315",
  "Nonce": "6694602343414857",
  "Raw": {
    "state": "17992213613691315",
    "nonce": "6694602343414857",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 30/05/2015 03:22:17 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:22:17 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 30/05/2015 03:22:17 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 30/05/2015 03:22:17 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=17992213613691315&nonce=6694602343414857&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685961378111854}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:17 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:17 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=17992213613691315&nonce=6694602343414857&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685961378111854
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:17 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:22 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:22 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:22 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:22 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=17992213613691315&nonce=6694602343414857&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:22:22 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:22:22 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:22:22 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "17992213613691315",
  "Nonce": "6694602343414857",
  "SessionId": "dc6aa3e4279217e5b6bde512c28e21d0",
  "Raw": {
    "state": "17992213613691315",
    "nonce": "6694602343414857",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:22:22 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:22:22 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "1",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "17992213613691315",
  "Nonce": "6694602343414857",
  "SessionId": "dc6aa3e4279217e5b6bde512c28e21d0",
  "Raw": {
    "state": "17992213613691315",
    "nonce": "6694602343414857",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 30/05/2015 03:22:22 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 30/05/2015 03:22:22 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 30/05/2015 03:22:22 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 30/05/2015 03:22:22 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 30/05/2015 03:22:22 p.m. +00:00 -- Getting claims for identity token for subject: 1
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 30/05/2015 03:22:22 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:22:22 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 30/05/2015 03:22:22 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 03:22:22 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 03:22:22 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 30/05/2015 03:22:22 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 30/05/2015 03:22:22 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:22:22 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:22:22 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 30/05/2015 03:22:22 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 30/05/2015 03:22:22 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 30/05/2015 03:22:22 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 30/05/2015 03:22:22 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 30/05/2015 03:22:22 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 30/05/2015 03:22:22 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:22:25 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:22:25 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:22:25 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:22:25 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:22:30 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:22:30 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:22:30 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:22:30 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:22:33 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:22:33 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:22:33 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:22:33 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 03:22:36 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 30/05/2015 03:22:36 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 30/05/2015 03:22:36 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:22:36 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:22:36 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 30/05/2015 03:22:36 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "1",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 30/05/2015 03:22:36 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 30/05/2015 03:22:36 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 30/05/2015 03:22:36 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685961563263696}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:36 p.m. +00:00 -- Logout prompt for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:36 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:36 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:36 p.m. +00:00 -- Logout requested for subject: 1
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:36 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:22:36 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 30/05/2015 03:22:37 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 30/05/2015 03:22:37 p.m. +00:00 -- unhandled exception in Autofac middleware
System.ObjectDisposedException: CancellationTokenSource se ha desechado.
   en System.Threading.CancellationTokenSource.ThrowObjectDisposedException()
   en System.Threading.CancellationTokenSource.InternalRegister(Action`1 callback, Object stateForCallback, SynchronizationContext targetSyncContext, ExecutionContext executionContext)
   en System.Threading.CancellationToken.Register(Action`1 callback, Object state, Boolean useSynchronizationContext, Boolean useExecutionContext)
   en System.Threading.CancellationToken.Register(Action`1 callback, Object state)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.OwinHttpListenerContext.GetCallCancelled()
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.CallEnvironment.get_CallCancelled()
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.CallEnvironment.PropertiesTryGetValue(String key, Object& value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.CallEnvironment.TryGetValue(String key, Object& value)
   en Microsoft.Owin.OwinRequest.Get[T](String key) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en Microsoft.Owin.OwinRequest.get_CallCancelled() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 03:33:40 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:33:40 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:33:40 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:33:40 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "48249152118908294",
  "Nonce": "5021348876991593",
  "Raw": {
    "state": "48249152118908294",
    "nonce": "5021348876991593",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeInteractionResponseGenerator]: 30/05/2015 03:33:40 p.m. +00:00 -- User is not authenticated. Redirecting to login.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:33:40 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LoginResult]: 30/05/2015 03:33:40 p.m. +00:00 -- Redirecting to login page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 30/05/2015 03:33:40 p.m. +00:00 -- Protecting message: {"ReturnUrl":"https://localhost:44333/core/connect/authorize?state=48249152118908294&nonce=5021348876991593&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi","ClientId":"implicitclient","AcrValues":[],"Created":635685968204035713}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:33:40 p.m. +00:00 -- Login page requested
Debug: [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:33:40 p.m. +00:00 -- signin message passed to login: {
  "ReturnUrl": "https://localhost:44333/core/connect/authorize?state=48249152118908294&nonce=5021348876991593&client_id=implicitclient&redirect_uri=http%3A%2F%2Flocalhost%3A59380%2Fmodal.html&response_type=id_token%20token&scope=openid%20profile%20email%20webapi",
  "ClientId": "implicitclient",
  "IdP": null,
  "Tenant": null,
  "LoginHint": null,
  "DisplayMode": null,
  "UiLocales": null,
  "AcrValues": [],
  "Created": 635685968204035713
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:33:40 p.m. +00:00 -- rendering login page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:33:47 p.m. +00:00 -- Login page submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:33:47 p.m. +00:00 -- Login credentials successfully validated by user service
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:33:47 p.m. +00:00 -- issuing cookie
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:33:47 p.m. +00:00 -- redirecting to: https://localhost:44333/core/connect/authorize?state=48249152118908294&nonce=5021348876991593&client_id=implicitclient&redirect_uri=http:%2F%2Flocalhost:59380%2Fmodal.html&response_type=id_token token&scope=openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:33:47 p.m. +00:00 -- Start authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:33:47 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:33:47 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "48249152118908294",
  "Nonce": "5021348876991593",
  "SessionId": "1f7dd14b3177c45028c1a1cda4519104",
  "Raw": {
    "state": "48249152118908294",
    "nonce": "5021348876991593",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:33:47 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:33:47 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "48249152118908294",
  "Nonce": "5021348876991593",
  "SessionId": "1f7dd14b3177c45028c1a1cda4519104",
  "Raw": {
    "state": "48249152118908294",
    "nonce": "5021348876991593",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:33:47 p.m. +00:00 -- Showing consent screen
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:33:47 p.m. +00:00 -- End authorize request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthorizeEndpointController]: 30/05/2015 03:33:51 p.m. +00:00 -- Resuming from consent, restarting validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:33:51 p.m. +00:00 -- Start authorize request protocol validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:33:51 p.m. +00:00 -- Authorize request validation success
 {
  "RedirectUri": "http://localhost:59380/modal.html",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "48249152118908294",
  "Nonce": "5021348876991593",
  "SessionId": "1f7dd14b3177c45028c1a1cda4519104",
  "Raw": {
    "state": "48249152118908294",
    "nonce": "5021348876991593",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:33:51 p.m. +00:00 -- Start authorize request client validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.AuthorizeRequestValidator]: 30/05/2015 03:33:51 p.m. +00:00 -- Authorize request validation success
 {
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "RedirectUri": "http://localhost:59380/modal.html",
  "AllowedRedirectUris": [
    "http://localhost:59380/callback.html",
    "http://localhost:59380/modal.html"
  ],
  "SubjectId": "2",
  "ResponseType": "id_token token",
  "ResponseMode": "fragment",
  "Flow": "Implicit",
  "RequestedScopes": "openid profile email webapi",
  "State": "48249152118908294",
  "Nonce": "5021348876991593",
  "SessionId": "1f7dd14b3177c45028c1a1cda4519104",
  "Raw": {
    "state": "48249152118908294",
    "nonce": "5021348876991593",
    "client_id": "implicitclient",
    "redirect_uri": "http://localhost:59380/modal.html",
    "response_type": "id_token token",
    "scope": "openid profile email webapi"
  }
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.AuthorizeResponseGenerator]: 30/05/2015 03:33:51 p.m. +00:00 -- Creating Implicit Flow response.
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 30/05/2015 03:33:51 p.m. +00:00 -- Creating access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 30/05/2015 03:33:51 p.m. +00:00 -- Creating JWT access token
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 30/05/2015 03:33:51 p.m. +00:00 -- Creating identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Services.Default.DefaultClaimsProvider]: 30/05/2015 03:33:51 p.m. +00:00 -- Getting claims for identity token for subject: 2
Debug: [Thinktecture.IdentityServer.Core.Services.Default.DefaultTokenService]: 30/05/2015 03:33:51 p.m. +00:00 -- Creating JWT identity token
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.AuthorizeRedirectResult]: 30/05/2015 03:33:51 p.m. +00:00 -- Redirecting to: http://localhost:59380/modal.html
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 03:33:51 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 03:33:51 p.m. +00:00 -- Start key discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 30/05/2015 03:33:51 p.m. +00:00 -- Start userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 30/05/2015 03:33:51 p.m. +00:00 -- Token found: AuthorizationHeader
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:33:51 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:33:51 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt",
  "ExpectedScope": "openid"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 30/05/2015 03:33:51 p.m. +00:00 -- Creating userinfo response
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 30/05/2015 03:33:51 p.m. +00:00 -- Scopes in access token: openid profile email webapi
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 30/05/2015 03:33:51 p.m. +00:00 -- Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at email email_verified
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.ResponseHandling.UserInfoResponseGenerator]: 30/05/2015 03:33:51 p.m. +00:00 -- Profile service returned to the following claim types: sub name given_name family_name email email_verified website
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.UserInfoEndpointController]: 30/05/2015 03:33:51 p.m. +00:00 -- End userinfo request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.UserInfoResult]: 30/05/2015 03:33:51 p.m. +00:00 -- Returning userinfo response.
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:02 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:02 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:02 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:02 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:13 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:13 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:13 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:13 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:15 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:15 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:15 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:15 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:20 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:20 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:20 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:20 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:22 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:22 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:22 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:22 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:22 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:22 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:22 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:22 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:30 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:30 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:30 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:30 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:32 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:32 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:32 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:32 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:36 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:36 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:36 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:36 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:40 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:40 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:40 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:40 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:42 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:42 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:42 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:42 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:45 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:45 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:45 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:45 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:47 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:47 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:47 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:47 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:47 p.m. +00:00 -- Start access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:47 p.m. +00:00 -- Start access token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:47 p.m. +00:00 -- Token validation success
{
  "ValidateLifetime": true,
  "AccessTokenType": "Jwt"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AccessTokenValidationController]: 30/05/2015 03:34:47 p.m. +00:00 -- End access token validation request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.DiscoveryEndpointController]: 30/05/2015 03:34:49 p.m. +00:00 -- Start discovery request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 30/05/2015 03:34:49 p.m. +00:00 -- Start end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 30/05/2015 03:34:49 p.m. +00:00 -- Start end session request validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:49 p.m. +00:00 -- Start identity token validation
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.TokenValidator]: 30/05/2015 03:34:49 p.m. +00:00 -- Token validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "ValidateLifetime": false
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Validation.EndSessionRequestValidator]: 30/05/2015 03:34:49 p.m. +00:00 -- End session request validation success
{
  "ClientId": "implicitclient",
  "ClientName": "Implicit Clients",
  "SubjectId": "2",
  "PostLogOutUri": "http://localhost:59380/index.html"
}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 30/05/2015 03:34:49 p.m. +00:00 -- End end session request
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Results.LogoutResult]: 30/05/2015 03:34:49 p.m. +00:00 -- Redirecting to logout page
Debug: [Thinktecture.IdentityServer.Core.Configuration.Hosting.MessageCookie`1]: 30/05/2015 03:34:49 p.m. +00:00 -- Protecting message: {"ClientId":"implicitclient","ReturnUrl":"http://localhost:59380/index.html","Created":635685968899373450}
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:34:49 p.m. +00:00 -- Logout prompt for subject: 2
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:34:49 p.m. +00:00 -- SignOutMessage present (from client implicitclient), performing logout
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:34:49 p.m. +00:00 -- Logout endpoint submitted
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:34:49 p.m. +00:00 -- Logout requested for subject: 2
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:34:49 p.m. +00:00 -- Clearing cookies
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.AuthenticationController]: 30/05/2015 03:34:49 p.m. +00:00 -- rendering logged out page
SelfHost.vshost.exe Information: 0 : [Thinktecture.IdentityServer.Core.Endpoints.EndSessionController]: 30/05/2015 03:34:50 p.m. +00:00 -- End session callback requested
SelfHost.vshost.exe Error: 0 : FATAL : [Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware]: 30/05/2015 03:34:50 p.m. +00:00 -- unhandled exception in Autofac middleware
System.ObjectDisposedException: CancellationTokenSource se ha desechado.
   en System.Threading.CancellationTokenSource.ThrowObjectDisposedException()
   en System.Threading.CancellationTokenSource.InternalRegister(Action`1 callback, Object stateForCallback, SynchronizationContext targetSyncContext, ExecutionContext executionContext)
   en System.Threading.CancellationToken.Register(Action`1 callback, Object state, Boolean useSynchronizationContext, Boolean useExecutionContext)
   en System.Threading.CancellationToken.Register(Action`1 callback, Object state)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.OwinHttpListenerContext.GetCallCancelled()
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.CallEnvironment.get_CallCancelled()
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.CallEnvironment.PropertiesTryGetValue(String key, Object& value)
   en Microsoft.Owin.Host.HttpListener.RequestProcessing.CallEnvironment.TryGetValue(String key, Object& value)
   en Microsoft.Owin.OwinRequest.Get[T](String key) en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en Microsoft.Owin.OwinRequest.get_CallCancelled() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
   en System.Web.Http.Owin.HttpMessageHandlerAdapter.<InvokeCore>d__0.MoveNext() en c:\projects\thinktecture\source\Core\Services\Default\DefaultTokenService.cs:línea 0
--- Fin del seguimiento de la pila de la ubicación anterior donde se produjo la excepción ---
   en System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
   en System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   en Thinktecture.IdentityServer.Core.Configuration.Hosting.AutofacContainerMiddleware.<Invoke>d__4.MoveNext() en c:\projects\thinktecture\source\Core\Configuration\Hosting\AutofacContainerMiddleware.cs:línea 56
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 30/05/2015 04:05:50 p.m. +00:00 -- AuthorizationCodeStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 30/05/2015 04:05:50 p.m. +00:00 -- TokenHandleStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 30/05/2015 04:05:50 p.m. +00:00 -- ConsentStore not configured - falling back to InMemory
SelfHost.vshost.exe Warning: 0 : [Thinktecture.IdentityServer.Core.Configuration.IdentityServerServiceFactory]: 30/05/2015 04:05:50 p.m. +00:00 -- RefreshTokenStore not configured - falling back to InMemory
